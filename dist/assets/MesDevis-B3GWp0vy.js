import{a6 as w,u as S,r,j as e,ao as a,ah as L,ai as R,am as j,an as o,J as k}from"./index-CeO0dhlJ.js";import{L as E}from"./Layout-D_d__4G6.js";import"./Slider-DCLJ-u85.js";const T=()=>{const{isAuthenticated:x}=w(),l=S(),[n,f]=r.useState([]),[m,b]=r.useState(!0),[u,C]=r.useState(""),[t,g]=r.useState(null),[h,v]=r.useState(""),[i,y]=r.useState("all");r.useEffect(()=>{x||l("/connexion")},[x,l]),r.useEffect(()=>{setTimeout(()=>{f([{id:"1",quoteNumber:"DEV-2024-001",date:"2024-03-15T10:30:00Z",status:"pending",totalAmount:2500.99,items:[{id:"item1",productId:"prod1",productName:"Pompe à chaleur AIRWELL",quantity:1,unitPrice:2000.99,imageUrl:"/climatisation.jpeg"},{id:"item2",productId:"prod2",productName:"Installation standard",quantity:1,unitPrice:500,imageUrl:"/installation.jpeg"}]}]),b(!1)},1e3)},[]);const p=s=>{const c=new Date(s);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(c)},d=s=>{switch(s){case"pending":return{label:"En attente",color:"bg-yellow-100 text-yellow-700"};case"accepted":return{label:"Accepté",color:"bg-green-100 text-green-700"};case"rejected":return{label:"Refusé",color:"bg-red-100 text-red-700"};case"expired":return{label:"Expiré",color:"bg-gray-100 text-gray-700"};default:return{label:"Inconnu",color:"bg-gray-100 text-gray-700"}}},N=n.filter(s=>{const c=s.quoteNumber.toLowerCase().includes(h.toLowerCase()),F=i==="all"||s.status===i;return c&&F});return e.jsx(E,{children:e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center",children:[e.jsx(a,{className:"mr-3 text-[#007FFF]"}),"Mes Devis"]})}),!t&&!m&&n.length>0&&e.jsxs("div",{className:"mb-8 space-y-4 md:space-y-0 md:flex md:items-center md:space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:"w-5 h-5 text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Rechercher un devis...",value:h,onChange:s=>v(s.target.value),className:"block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#007FFF] focus:border-transparent transition-colors bg-white"})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsxs("select",{value:i,onChange:s=>y(s.target.value),className:"block w-full pl-4 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#007FFF] focus:border-transparent appearance-none transition-colors bg-white/80 backdrop-blur-sm",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"accepted",children:"Accepté"}),e.jsx("option",{value:"rejected",children:"Refusé"}),e.jsx("option",{value:"expired",children:"Expiré"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(R,{className:"h-4 w-4 text-gray-400"})})]})]}),m?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#007FFF]"})}):u?e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded mb-6",children:e.jsxs("p",{className:"flex items-center",children:[e.jsx(a,{className:"mr-2"}),u]})}):n.length===0?e.jsxs("div",{className:"bg-gray-100 rounded-lg p-8 text-center shadow-sm",children:[e.jsx(a,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun devis"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Vous n'avez pas encore reçu de devis."}),e.jsx("button",{onClick:()=>l("/nos-produits"),className:"px-4 py-2 bg-[#007FFF] text-white rounded-md hover:bg-[#7CB9E8] transition-colors",children:"Parcourir nos produits"})]}):e.jsx("div",{className:"",children:t?e.jsxs("div",{className:"p-4 md:p-6 bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center border-b pb-4 mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-2 md:mb-0",children:["Devis #",t.quoteNumber]}),e.jsxs("button",{onClick:()=>g(null),className:"text-gray-600 hover:text-[#007FFF] inline-flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Retour aux devis"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Date du devis"}),e.jsxs("p",{className:"flex items-center text-gray-800",children:[e.jsx(j,{className:"mr-2 text-[#007FFF]"}),p(t.date)]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Statut"}),e.jsxs("p",{className:`flex items-center ${d(t.status).color}`,children:[e.jsx(a,{className:"mr-2"}),d(t.status).label]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden mb-6",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 bg-gray-100 p-4 text-sm text-gray-500",children:[e.jsx("div",{className:"col-span-6",children:"Produit"}),e.jsx("div",{className:"col-span-2 text-center",children:"Prix unitaire"}),e.jsx("div",{className:"col-span-2 text-center",children:"Quantité"}),e.jsx("div",{className:"col-span-2 text-right",children:"Total"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:t.items.map(s=>e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"md:hidden space-y-2",children:e.jsxs("div",{className:"flex items-center",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:s.productName,className:"h-16 w-16 object-cover rounded mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.productName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Prix unitaire: ",s.unitPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quantité: ",s.quantity]}),e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["Total: ",(s.unitPrice*s.quantity).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})]})]})]})}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 items-center",children:[e.jsxs("div",{className:"col-span-6 flex items-center",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:s.productName,className:"h-10 w-10 mr-3 object-cover rounded"}),e.jsx("span",{className:"font-medium text-gray-800",children:s.productName})]}),e.jsx("div",{className:"col-span-2 text-center",children:s.unitPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})}),e.jsx("div",{className:"col-span-2 text-center",children:s.quantity}),e.jsx("div",{className:"col-span-2 text-right font-medium",children:(s.unitPrice*s.quantity).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})})]})]},s.id))}),e.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"Total"}),e.jsx("span",{className:"font-bold text-gray-800",children:t.totalAmount.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-end space-y-3 md:space-y-0 md:space-x-4",children:[t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors flex items-center justify-center",children:"Accepter le devis"}),e.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center",children:"Refuser le devis"})]}),e.jsxs("button",{className:"px-4 py-2 bg-[#007FFF] text-white rounded-xl hover:bg-[#7CB9E8] transition-colors flex items-center justify-center",children:[e.jsx(o,{className:"mr-2"}),"Télécharger le devis"]})]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4",children:N.map(s=>e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-white to-gray-50 rounded-xl p-0 hover:shadow-lg transition-all duration-300 border border-gray-100",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${s.status==="accepted"?"bg-gradient-to-r from-green-400 to-green-500":s.status==="pending"?"bg-gradient-to-r from-yellow-300 to-yellow-400":s.status==="rejected"?"bg-gradient-to-r from-red-400 to-red-500":"bg-gradient-to-r from-gray-300 to-gray-400"}`}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Devis #",s.quoteNumber]}),e.jsxs("div",{className:"flex items-center mt-1 text-gray-500",children:[e.jsx(j,{className:"mr-1 text-[#007FFF] text-xs"}),e.jsx("span",{className:"text-xs",children:p(s.date)})]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center ${s.status==="accepted"?"bg-green-50 text-green-700 border border-green-200":s.status==="pending"?"bg-yellow-50 text-yellow-700 border border-yellow-200":s.status==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-gray-50 text-gray-700 border border-gray-200"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${s.status==="accepted"?"bg-green-500":s.status==="pending"?"bg-yellow-500":s.status==="rejected"?"bg-red-500":"bg-gray-500"}`}),d(s.status).label]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600 bg-white rounded-lg p-2.5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-blue-50 mr-2",children:e.jsx(a,{className:"text-[#007FFF] text-xs"})}),e.jsx("span",{className:"text-xs font-medium",children:"Articles"})]}),e.jsx("span",{className:"text-base font-semibold text-gray-800",children:s.items.length})]}),e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-[#007FFF]/5 rounded-lg",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Total"}),e.jsxs("div",{className:"flex items-center text-base font-bold text-gray-800",children:[e.jsx("span",{className:"text-[#007FFF] mr-1 text-sm",children:"€"}),s.totalAmount.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 pt-1",children:[e.jsxs("button",{onClick:()=>g(s),className:"w-full bg-[#007FFF] text-white rounded-lg py-2 px-3 text-sm font-medium hover:bg-[#0066CC] transition-colors duration-200 flex items-center justify-center shadow-sm hover:shadow-md",children:[e.jsx(k,{className:"mr-1.5 text-xs"}),"Voir détail"]}),e.jsx("div",{className:`grid ${s.status==="pending"?"grid-cols-2":"grid-cols-1"} gap-2`,children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"group relative w-full bg-white text-green-600 border border-green-500 rounded-lg py-1.5 px-3 text-sm font-medium hover:bg-green-500 hover:text-white transition-all duration-200 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Accepter"]}),e.jsx("div",{className:"absolute inset-0 bg-green-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-200 z-0"})]}),e.jsxs("button",{className:"group relative w-full bg-white text-red-600 border border-red-500 rounded-lg py-1.5 px-3 text-sm font-medium hover:bg-red-500 hover:text-white transition-all duration-200 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Refuser"]}),e.jsx("div",{className:"absolute inset-0 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-200 z-0"})]})]}):e.jsxs("button",{className:"group relative w-full bg-white text-[#007FFF] border border-[#007FFF] rounded-lg py-1.5 px-3 text-sm font-medium hover:bg-[#007FFF] hover:text-white transition-all duration-200 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center",children:[e.jsx(o,{className:"mr-1.5 text-xs"}),"Télécharger"]}),e.jsx("div",{className:"absolute inset-0 bg-[#007FFF] transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-200 z-0"})]})}),s.status==="pending"&&e.jsxs("button",{className:"group relative w-full bg-white text-[#007FFF] border border-[#007FFF] rounded-lg py-1.5 px-3 text-sm font-medium hover:bg-[#007FFF] hover:text-white transition-all duration-200 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center",children:[e.jsx(o,{className:"mr-1.5 text-xs"}),"Télécharger"]}),e.jsx("div",{className:"absolute inset-0 bg-[#007FFF] transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-200 z-0"})]})]})]})]},s.id))})})]})})})};export{T as default};
