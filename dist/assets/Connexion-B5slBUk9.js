import{A as L,a2 as P,r as s,j as e,y as R,a1 as E,a3 as U,a4 as S,a5 as V,x as I,w as T,a6 as M}from"./index-D4J_UHvf.js";import{L as H}from"./Layout-DeyqX9Rk.js";import"./Breadcrumb-Bhm49qf3.js";const K=({inCart:f=!1,onSwitchForm:v,onShowForgotPassword:j,onGoogleSuccess:h,onGoogleError:m})=>{const u=L(),{login:l}=P(),[g,a]=s.useState(!1),[r,n]=s.useState(""),[x,t]=s.useState({email:"",password:""}),p=i=>{const{name:o,value:b}=i.target;t({...x,[o]:b})},d=async i=>{var o,b,c,w;i.preventDefault(),n("");try{a(!0);const N=await S.login(x);l(N),setTimeout(f?()=>{u("/panier/delivery")}:()=>{u("/")},2e3)}catch(N){console.error("Erreur de connexion:",N),((o=N.response)==null?void 0:o.status)===401?n("Email ou mot de passe incorrect."):((b=N.response)==null?void 0:b.status)===400?n("Veuillez vérifier vos informations de connexion."):n(((w=(c=N.response)==null?void 0:c.data)==null?void 0:w.message)||"Une erreur est survenue lors de la connexion.")}finally{a(!1)}};return e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-md text-red-600 text-sm",children:r}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"votreemail@exemple.com",value:x.email,onChange:p,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"password",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"********",value:x.password,onChange:p,required:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:j,className:"text-sm text-teal-600 hover:underline",children:"Mot de passe oublié ?"})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-lg hover:from-teal-700 hover:to-blue-700",disabled:g,children:g?"Chargement...":"Se connecter"})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Ou"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(U,{width:"100%",size:"large",text:"continue_with",shape:"rectangular",onSuccess:h,onError:m})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Vous n'avez pas de compte ?"," ",e.jsx("button",{type:"button",onClick:v,className:"text-teal-600 hover:underline font-medium",children:"Créer un compte"})]})})]})},Q=({inCart:f=!1,onSwitchForm:v,onGoogleSuccess:j,onGoogleError:h})=>{const m=L(),{login:u}=P(),[l,g]=s.useState(!1),[a,r]=s.useState(""),[n,x]=s.useState({firstName:"",lastName:"",email:"",password:"",companyName:"",siretNumber:"",phoneNumber:""}),t=d=>{const{name:i,value:o}=d.target;x({...n,[i]:o})},p=async d=>{var i,o,b,c,w,N,F;d.preventDefault(),r("");try{g(!0),console.log("Données d'inscription à envoyer:",n);const y=await S.register(n);u(y),f?setTimeout(()=>{m("/panier/delivery")},2e3):setTimeout(()=>{m("/inscription-reussie")},1e3)}catch(y){console.error("Erreur d'inscription:",y),((i=y.response)==null?void 0:i.status)===409?r("Un utilisateur avec cette adresse email existe déjà."):((o=y.response)==null?void 0:o.status)===400?(w=(c=(b=y.response)==null?void 0:b.data)==null?void 0:c.message)!=null&&w.includes("téléphone")?r("Le format du numéro de téléphone n'est pas valide. Utilisez le format +33XXXXXXXXX."):r("Veuillez vérifier vos informations d'inscription."):r(((F=(N=y.response)==null?void 0:N.data)==null?void 0:F.message)||"Une erreur est survenue lors de l'inscription.")}finally{g(!1)}};return e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-md text-red-600 text-sm",children:a}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prénom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"firstName",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Jean",value:n.firstName,onChange:t,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"lastName",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Dupont",value:n.lastName,onChange:t,required:!0})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"votreemail@exemple.com",value:n.email,onChange:t,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"password",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"********",value:n.password,onChange:t,required:!0,minLength:8})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Le mot de passe doit contenir au moins 8 caractères."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Téléphone",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",name:"phoneNumber",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"06 12 34 56 78",value:n.phoneNumber,onChange:t,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom de l'entreprise",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"companyName",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Votre entreprise",value:n.companyName,onChange:t,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Numéro SIRET",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"siretNumber",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"123 456 789 00012",value:n.siretNumber,onChange:t,required:!0})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-lg hover:from-teal-700 hover:to-blue-700",disabled:l,children:l?"Chargement...":"Créer un compte"})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Ou"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(U,{width:"100%",size:"large",text:"signup_with",shape:"rectangular",onSuccess:j,onError:h})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Vous avez déjà un compte ?"," ",e.jsx("button",{type:"button",onClick:v,className:"text-teal-600 hover:underline font-medium",children:"Se connecter"})]})})]})},Y=({onCancel:f})=>{const[v,j]=s.useState(!1),[h,m]=s.useState(""),[u,l]=s.useState(""),[g,a]=s.useState({email:""}),r=x=>{const{name:t,value:p}=x.target;a({...g,[t]:p})},n=async x=>{var t,p,d,i;x.preventDefault(),m(""),l("");try{if(j(!0),!g.email){m("Veuillez renseigner votre adresse email.");return}const o=await S.forgotPassword(g);l("Un email de réinitialisation a été envoyé à votre adresse."),a({email:""})}catch(o){console.error("Erreur de récupération mot de passe:",o),((t=o.response)==null?void 0:t.status)===404?m("Aucun compte n'est associé à cette adresse email."):((p=o.response)==null?void 0:p.status)===400?m("Veuillez vérifier votre adresse email."):m(((i=(d=o.response)==null?void 0:d.data)==null?void 0:i.message)||"Une erreur est survenue. Veuillez réessayer plus tard.")}finally{j(!1)}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-teal-600",children:"Mot de passe oublié"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Veuillez saisir votre adresse email. Vous recevrez un lien pour créer un nouveau mot de passe."}),h&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-md text-red-600 text-sm mb-4",children:h}),u&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-200 rounded-md text-green-600 text-sm mb-4",children:u}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"votreemail@exemple.com",value:g.email,onChange:r,required:!0})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:f,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Annuler"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-lg hover:from-teal-700 hover:to-blue-700",disabled:v,children:v?"Chargement...":"Envoyer"})]})]})]})})},Z=({token:f,onCancel:v,onSuccess:j})=>{const[h,m]=s.useState(!1),[u,l]=s.useState(""),[g,a]=s.useState(""),[r,n]=s.useState({password:"",confirmPassword:"",token:f}),x=p=>{const{name:d,value:i}=p.target;n({...r,[d]:i})},t=async p=>{var d,i,o,b;p.preventDefault(),l(""),a("");try{if(m(!0),r.password!==r.confirmPassword){l("Les mots de passe ne correspondent pas.");return}if(r.password.length<8){l("Le mot de passe doit contenir au moins 8 caractères.");return}await S.resetPassword({password:r.password,token:r.token}),a("Votre mot de passe a été réinitialisé avec succès."),setTimeout(()=>{j()},2e3)}catch(c){console.error("Erreur de réinitialisation mot de passe:",c),((d=c.response)==null?void 0:d.status)===400?l("Le lien de réinitialisation est invalide ou a expiré."):((i=c.response)==null?void 0:i.status)===401?l("Le lien de réinitialisation a expiré."):l(((b=(o=c.response)==null?void 0:o.data)==null?void 0:b.message)||"Une erreur est survenue. Veuillez réessayer plus tard.")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-teal-600",children:"Réinitialisation du mot de passe"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Veuillez saisir votre nouveau mot de passe."}),u&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-md text-red-600 text-sm mb-4",children:u}),g&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-200 rounded-md text-green-600 text-sm mb-4",children:g}),e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nouveau mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"password",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"********",value:r.password,onChange:x,required:!0,minLength:8})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Le mot de passe doit contenir au moins 8 caractères."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirmer le mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"confirmPassword",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"********",value:r.confirmPassword,onChange:x,required:!0})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Annuler"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-lg hover:from-teal-700 hover:to-blue-700",disabled:h,children:h?"Chargement...":"Réinitialiser"})]})]})]})})},ee=({googleCredential:f,onCancel:v,inCart:j=!1})=>{const h=L(),{login:m}=P(),[u,l]=s.useState(!1),[g,a]=s.useState(""),[r,n]=s.useState({phoneNumber:"",companyName:"",siretNumber:""}),x=async t=>{var p,d,i,o,b;t.preventDefault(),a("");try{if(l(!0),!f)throw new Error("Session Google expirée. Veuillez réessayer.");const c=await S.registerWithGoogle(f,r);m(c),j?setTimeout(()=>{h("/panier/delivery")},2e3):setTimeout(()=>{h("/inscription-reussie")},1e3)}catch(c){console.error("Erreur d'inscription Google:",c),(i=(d=(p=c.response)==null?void 0:p.data)==null?void 0:d.message)!=null&&i.includes("téléphone")?a("Le format du numéro de téléphone n'est pas valide. Utilisez le format +33XXXXXXXXX."):a(((b=(o=c.response)==null?void 0:o.data)==null?void 0:b.message)||"Une erreur est survenue lors de l'inscription.")}finally{l(!1)}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-teal-600",children:"Informations supplémentaires requises"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Pour finaliser votre inscription, veuillez fournir les informations suivantes :"}),g&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-md text-red-600 text-sm mb-4",children:g}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Numéro de téléphone",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"06 12 34 56 78",value:r.phoneNumber,onChange:t=>n({...r,phoneNumber:t.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom de l'entreprise",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Distritherm Services",value:r.companyName,onChange:t=>n({...r,companyName:t.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Numéro SIRET",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"123 456 789 00012",value:r.siretNumber,onChange:t=>n({...r,siretNumber:t.target.value}),required:!0})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Annuler"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-lg hover:from-teal-700 hover:to-blue-700",disabled:u,children:u?"Chargement...":"S'inscrire"})]})]})]})})},ae=({inCart:f=!1})=>{const v=L(),{isAuthenticated:j,error:h,clearError:m}=P(),[u,l]=s.useState(!0),[g,a]=s.useState(""),[r,n]=s.useState(null),[x,t]=s.useState(null),[p,d]=s.useState(!1),[i,o]=s.useState(!1),[b,c]=s.useState(!1),[w,N]=s.useState(null),[F,y]=s.useState("");s.useEffect(()=>{j&&v("/")},[j,v]),s.useEffect(()=>{h&&(a(h),m())},[h,m]),s.useEffect(()=>{const C=new URLSearchParams(window.location.search).get("token");C&&(y(C),c(!0),window.history.replaceState({},document.title,window.location.pathname))},[]);const D=async k=>{var C,A,G;try{if(a(""),!k.credential)throw new Error("Aucun credential Google reçu");t(k.credential),await S.loginWithGoogle(k.credential)}catch(z){console.error("Erreur Google Login:",z),((C=z.response)==null?void 0:C.status)===404?d(!0):a(((G=(A=z.response)==null?void 0:A.data)==null?void 0:G.message)||"Une erreur est survenue lors de la connexion avec Google.")}},X=()=>{a("La connexion avec Google a échoué. Veuillez réessayer ou utiliser le formulaire de connexion classique.")},q=()=>{l(!u),a("")},O=()=>{o(!0),a("")},W=()=>{o(!1),a("")},_=()=>{c(!1),l(!0)},B=()=>{c(!1),l(!0)},J=()=>{d(!1),t(null),a("")},$=()=>e.jsx("section",{className:`relative ${f?"py-4":"py-20"} overflow-hidden`,children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:u?"Connexion":"Inscription"}),e.jsx("p",{className:"text-gray-600",children:u?"Connectez-vous à votre compte pour continuer":"Créez un compte pour accéder à tous nos services"})]}),u?e.jsx(K,{inCart:f,onSwitchForm:q,onShowForgotPassword:O,onGoogleSuccess:D,onGoogleError:X}):e.jsx(Q,{inCart:f,onSwitchForm:q,onGoogleSuccess:D,onGoogleError:X})]})})})});return e.jsxs(H,{children:[p&&x&&e.jsx(ee,{googleCredential:x,onCancel:J,inCart:f}),i&&e.jsx(Y,{onCancel:W}),b&&e.jsx(Z,{token:F,onCancel:B,onSuccess:_}),$()]})};export{ae as default};
