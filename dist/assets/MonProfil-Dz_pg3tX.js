import{ab as L,r as m,j as e,ae as U,J as H,I as O,H as W,af as G,ah as J,ai as q,ad as R,aa as P,x as S,a2 as B,aj as z,ak as K,U as Z,Z as Q,M as X,u as Y,L as M,s as _,al as ee,am as se,b as re}from"./index-qygQK-mN.js";import{L as te}from"./Layout-C31tzxm1.js";import{y as N}from"./index-BCIK0DA9.js";const ae=({user:s,onUpdateSuccess:c})=>{var k,C;const{updateUser:o}=L(),[t,l]=m.useState({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",companyName:(s==null?void 0:s.companyName)||((k=s==null?void 0:s.client)==null?void 0:k.companyName)||"",siretNumber:(s==null?void 0:s.siretNumber)||((C=s==null?void 0:s.client)==null?void 0:C.siretNumber)||""}),[r,n]=m.useState(!1),[u,d]=m.useState(!1),[i,h]=m.useState(""),[x,p]=m.useState(""),g=j=>{const{name:b,value:a}=j.target;if(b==="siretNumber"){const w=a.replace(/\D/g,"").slice(0,14);l(E=>({...E,[b]:w}))}else l(f=>({...f,[b]:a}))},v=()=>t.siretNumber&&t.siretNumber.replace(/\D/g,"").length!==14?(h("Le numéro SIRET doit contenir exactement 14 chiffres."),!1):!0,D=async j=>{var b,a,f,w,E,$,I,T,V;if(j.preventDefault(),d(!0),h(""),p(""),!v()){d(!1);return}try{const F={firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,companyName:t.companyName,siretNumber:t.siretNumber.replace(/\D/g,"")},y=await R.updateProfile(F);y.user&&(o(y.user),p("Votre profil a été mis à jour avec succès."),n(!1),c())}catch(F){let y="Une erreur est survenue lors de la mise à jour du profil.";((b=F.response)==null?void 0:b.status)===400&&((w=(f=(a=F.response)==null?void 0:a.data)==null?void 0:f.message)!=null&&w.includes("téléphone")?y="Le format du numéro de téléphone n'est pas valide.":(I=($=(E=F.response)==null?void 0:E.data)==null?void 0:$.message)!=null&&I.includes("SIRET")?y="Le format du numéro SIRET n'est pas valide. Il doit contenir exactement 14 chiffres.":y=((V=(T=F.response)==null?void 0:T.data)==null?void 0:V.message)||y),h(y)}finally{d(!1)}};return e.jsxs("form",{onSubmit:D,children:[i&&e.jsx("div",{className:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",children:e.jsx("p",{children:i})}),x&&e.jsx("div",{className:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded",children:e.jsx("p",{children:x})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prénom"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"firstName",value:t.firstName,onChange:g,disabled:!r,className:`w-full pl-10 px-4 py-3 rounded-lg border ${r?"border-gray-200 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,placeholder:"Prénom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"lastName",value:t.lastName,onChange:g,disabled:!r,className:`w-full pl-10 px-4 py-3 rounded-lg border ${r?"border-gray-200 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,placeholder:"Nom"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse e-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",value:t.email,disabled:!0,className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 bg-gray-100 cursor-not-allowed",placeholder:"Email"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"L'adresse e-mail ne peut pas être modifiée."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numéro de téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(O,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",name:"phoneNumber",value:t.phoneNumber,onChange:g,disabled:!r,className:`w-full pl-10 px-4 py-3 rounded-lg border ${r?"border-gray-200 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,placeholder:"06 12 34 56 78"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Format: 06 12 34 56 78"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de l'entreprise"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"companyName",value:t.companyName,onChange:g,disabled:!r,className:`w-full pl-10 px-4 py-3 rounded-lg border ${r?"border-gray-200 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,placeholder:"Nom de l'entreprise"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numéro SIRET"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"siretNumber",value:t.siretNumber,onChange:g,disabled:!r,pattern:"[0-9]*",inputMode:"numeric",className:`w-full pl-10 px-4 py-3 rounded-lg border ${r?"border-gray-200 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 cursor-not-allowed"}`,placeholder:"12345678901234"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Format: 14 chiffres uniquement"})]}),e.jsx("div",{className:"mt-8 flex justify-end space-x-4",children:r?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),l({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",companyName:(s==null?void 0:s.companyName)||"",siretNumber:(s==null?void 0:s.siretNumber)||""}),h(""),p("")},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:u,className:`flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${u?"bg-[#7CB9E8] cursor-not-allowed":"bg-[#007FFF] hover:bg-[#0066CC]"}`,children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enregistrement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2"}),"Enregistrer"]})})]}):e.jsxs("button",{type:"button",onClick:()=>{n(!0),h(""),p("")},className:"flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(q,{className:"mr-2"}),"Modifier"]})})]})},le=()=>{const[s,c]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,t]=m.useState(!1),[l,r]=m.useState(""),[n,u]=m.useState(""),d=h=>{const{name:x,value:p}=h.target;c(g=>({...g,[x]:p}))},i=async h=>{var x,p,g;if(h.preventDefault(),t(!0),r(""),u(""),s.newPassword!==s.confirmPassword){r("Les nouveaux mots de passe ne correspondent pas."),t(!1);return}if(s.newPassword.length<8){r("Le nouveau mot de passe doit comporter au moins 8 caractères."),t(!1);return}try{await R.updatePassword(s.currentPassword,s.newPassword),u("Votre mot de passe a été mis à jour avec succès."),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(v){((x=v.response)==null?void 0:x.status)===401?r("Le mot de passe actuel est incorrect."):r(((g=(p=v.response)==null?void 0:p.data)==null?void 0:g.message)||"Une erreur est survenue lors de la mise à jour du mot de passe.")}finally{t(!1)}};return e.jsxs("form",{onSubmit:i,className:"mt-4",children:[l&&e.jsx("div",{className:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",children:e.jsx("p",{children:l})}),n&&e.jsx("div",{className:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded",children:e.jsx("p",{children:n})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mot de passe actuel",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"currentPassword",value:s.currentPassword,onChange:d,required:!0,className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"********"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nouveau mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"newPassword",value:s.newPassword,onChange:d,required:!0,minLength:8,className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"********"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Le mot de passe doit contenir au moins 8 caractères."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirmer le nouveau mot de passe",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:d,required:!0,className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"********"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:o,className:"flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enregistrement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2"}),"Changer le mot de passe"]})})})]})]})};class ne{async getUserAddresses(c){try{return(await S.get(`/addresses/users/${c}`)).data.addresses}catch(o){throw console.error("Erreur lors de la récupération des adresses:",o),o}}async createAddress(c,o){var t,l;try{const r={...o,postalCode:parseInt(o.postalCode.toString(),10)};return console.log("Création d'adresse - Données envoyées:",r),(await S.post(`/addresses/users/${c}`,r)).data.address}catch(r){throw console.error("Erreur lors de la création de l'adresse:",r),(l=(t=r.response)==null?void 0:t.data)!=null&&l.message?new Error(r.response.data.message):r}}async updateAddress(c,o,t){var l,r;try{const n={...t,...t.postalCode&&{postalCode:parseInt(t.postalCode.toString(),10)}};return console.log("Mise à jour d'adresse - Données envoyées:",n),(await S.put(`/addresses/users/${c}/${o}`,n)).data.address}catch(n){throw console.error("Erreur lors de la mise à jour de l'adresse:",n),(r=(l=n.response)==null?void 0:l.data)!=null&&r.message?new Error(n.response.data.message):n}}async setDefaultAddress(c,o){var t,l;try{return console.log("Définition d'adresse par défaut:",o),(await S.patch(`/addresses/users/${c}/${o}/default`)).data.address}catch(r){throw console.error("Erreur lors de la définition de l'adresse par défaut:",r),(l=(t=r.response)==null?void 0:t.data)!=null&&l.message?new Error(r.response.data.message):r}}async deleteAddress(c,o,t){var l,r;try{const n=await this.getUserAddresses(c);if(n.filter(i=>i.isFacturation===t).length<=1)throw new Error(t?"Impossible de supprimer la seule adresse de facturation":"Impossible de supprimer la seule adresse de livraison");const d=n.find(i=>i.id===o);if(d!=null&&d.isDefault)throw new Error("Impossible de supprimer une adresse par défaut");console.log("Suppression d'adresse:",o),await S.delete(`/addresses/users/${c}/${o}`)}catch(n){throw console.error("Erreur lors de la suppression de l'adresse:",n),(r=(l=n.response)==null?void 0:l.data)!=null&&r.message?new Error(n.response.data.message):n}}}const A=new ne,oe=({isOpen:s,onClose:c,onSubmit:o,address:t,isFacturation:l})=>{const[r,n]=m.useState({street:"",city:"",postalCode:75e3,country:"France",isDefault:!1,isFacturation:l});m.useEffect(()=>{n(t||{street:"",city:"",postalCode:75e3,country:"France",isDefault:!1,isFacturation:l})},[t,l]);const u=async d=>{d.preventDefault();try{const i={...r,isFacturation:l};console.log("Données à soumettre:",i),await o(i),c()}catch(i){N.error(i.message||"Erreur lors de l'enregistrement de l'adresse")}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:t?"Modifier l'adresse":l?"Nouvelle adresse de facturation":"Nouvelle adresse de livraison"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rue"}),e.jsx("input",{type:"text",value:r.street,onChange:d=>n(i=>({...i,street:d.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code postal"}),e.jsx("input",{type:"number",min:"1000",max:"99999",value:r.postalCode,onChange:d=>n(i=>({...i,postalCode:parseInt(d.target.value)||75e3})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ville"}),e.jsx("input",{type:"text",value:r.city,onChange:d=>n(i=>({...i,city:d.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pays"}),e.jsx("input",{type:"text",value:r.country,onChange:d=>n(i=>({...i,country:d.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),!l&&e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.isDefault,onChange:d=>n(i=>({...i,isDefault:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Définir comme adresse de livraison par défaut"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t?"Modifier":"Ajouter"})]})]})]})}):null},ie=()=>{const{user:s}=L(),[c,o]=m.useState([]),[t,l]=m.useState(!1),[r,n]=m.useState(),[u,d]=m.useState(!1),[i,h]=m.useState(!0);m.useEffect(()=>{s!=null&&s.id&&x()},[s]);const x=async()=>{try{h(!0);const a=await A.getUserAddresses(s.id);o(a)}catch(a){N.error(a.message||"Erreur lors du chargement des adresses")}finally{h(!1)}},p=a=>{d(a),n(void 0),l(!0)},g=a=>{n(a),d(a.isFacturation),l(!0)},v=async a=>{try{const f=c.find(w=>w.id===a);if(!f)return;await A.deleteAddress(s.id,a,f.isFacturation),N.success("Adresse supprimée avec succès"),x()}catch(f){N.error(f.message||"Erreur lors de la suppression de l'adresse")}},D=async a=>{try{await A.setDefaultAddress(s.id,a),N.success("Adresse définie comme adresse par défaut"),x()}catch(f){N.error(f.message||"Erreur lors de la définition de l'adresse par défaut")}},k=async a=>{try{r!=null&&r.id?(await A.updateAddress(s.id,r.id,a),N.success("Adresse mise à jour avec succès")):(await A.createAddress(s.id,a),N.success("Adresse ajoutée avec succès")),x(),l(!1)}catch(f){N.error(f.message||"Erreur lors de l'enregistrement de l'adresse")}},C=a=>e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.street}),e.jsxs("p",{className:"text-gray-600",children:[a.postalCode," ",a.city]}),e.jsx("p",{className:"text-gray-600",children:a.country}),a.isDefault&&e.jsxs("span",{className:"text-sm text-teal-600 mt-1 flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Adresse par défaut"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g(a),className:"text-blue-600 hover:text-blue-800",title:"Modifier l'adresse",children:e.jsx(K,{className:"h-5 w-5"})}),!a.isFacturation&&!a.isDefault&&e.jsx("button",{onClick:()=>v(a.id),className:"text-red-600 hover:text-red-800",title:"Supprimer l'adresse",children:e.jsx(Z,{className:"h-5 w-5"})}),!a.isFacturation&&!a.isDefault&&e.jsx("button",{onClick:()=>D(a.id),className:"text-yellow-600 hover:text-yellow-800",title:"Définir comme adresse par défaut",children:e.jsx(z,{className:"h-5 w-5"})})]})]})},a.id);if(i)return e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"})});const j=c.filter(a=>!a.isFacturation),b=c.filter(a=>a.isFacturation);return console.log("Adresses de livraison:",j),console.log("Adresses de facturation:",b),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Adresses de livraison"}),e.jsxs("button",{onClick:()=>p(!1),className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Ajouter une adresse"]})]}),j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(C)}):e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-gray-500",children:"Aucune adresse de livraison enregistrée"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Adresses de facturation"}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Ajouter une adresse"]})]}),b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(C)}):e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-gray-500",children:"Aucune adresse de facturation enregistrée"})]}),e.jsx(oe,{isOpen:t,onClose:()=>l(!1),onSubmit:k,address:r,isFacturation:u})]})},de=({message:s,type:c="info",duration:o=3e3,onClose:t})=>{const[l,r]=m.useState(!0);m.useEffect(()=>{const u=setTimeout(()=>{r(!1),t==null||t()},o);return()=>clearTimeout(u)},[o,t]);const n=()=>{switch(c){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-blue-500"}};return e.jsx(Q,{children:l&&e.jsx(X.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-8 left-1/2 transform -translate-x-1/2 ${n()} text-white px-6 py-3 rounded-lg shadow-lg z-[9999] flex items-center space-x-2 min-w-[300px] justify-center`,children:e.jsx("span",{className:"text-sm font-medium",children:s})})})},xe=()=>{var x;const{user:s,isAuthenticated:c,logout:o}=L(),t=Y(),[l,r]=m.useState("informations"),[n,u]=m.useState(!1);m.useEffect(()=>{c||t("/connexion")},[c,t]);const d=()=>{u(!0),setTimeout(()=>{o(),t("/")},2e3)},i=p=>{r(p)},h=()=>s!=null&&s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s!=null&&s.firstName?s.firstName:s!=null&&s.lastName?s.lastName:(s==null?void 0:s.email)||"Utilisateur";return e.jsxs(te,{children:[n&&e.jsx(de,{message:"Vous avez été déconnecté avec succès",type:"success",duration:2e3,onClose:()=>u(!1)}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] px-6 py-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-2xl font-bold text-[#007FFF]",children:s!=null&&s.firstName?s.firstName[0].toUpperCase():(x=s==null?void 0:s.email)==null?void 0:x[0].toUpperCase()})}),e.jsxs("div",{className:"ml-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:h()}),e.jsx("p",{className:"text-[#FFFFFF]/90",children:s==null?void 0:s.email})]})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(M,{to:"/mes-commandes",state:{from:"profile"},className:"flex items-center p-4 bg-white border border-gray-200 rounded-xl hover:border-[#007FFF] transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#7CB9E8]/20 rounded-lg flex items-center justify-center group-hover:bg-[#007FFF] transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-[#007FFF] group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Mes commandes"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Suivre mes commandes"})]})]}),e.jsxs(M,{to:"/mes-devis",state:{from:"profile"},className:"flex items-center p-4 bg-white border border-gray-200 rounded-xl hover:border-[#007FFF] transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#7CB9E8]/20 rounded-lg flex items-center justify-center group-hover:bg-[#007FFF] transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-[#007FFF] group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Mes devis"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gérer mes devis"})]})]}),e.jsxs(M,{to:"/favoris",state:{from:"profile"},className:"flex items-center p-4 bg-white border border-gray-200 rounded-xl hover:border-[#007FFF] transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#7CB9E8]/20 rounded-lg flex items-center justify-center group-hover:bg-[#007FFF] transition-colors",children:e.jsx(_,{className:"w-6 h-6 text-[#007FFF] group-hover:text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Mes favoris"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Voir mes favoris"})]})]}),e.jsxs("button",{onClick:d,className:"flex items-center p-4 bg-white border border-gray-200 rounded-xl hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center group-hover:bg-red-500 transition-colors",children:e.jsx(ee,{className:"w-6 h-6 text-red-600 group-hover:text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Déconnexion"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Se déconnecter"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mon Profil"})}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{className:`flex items-center px-6 py-4 text-sm font-medium ${l==="informations"?"border-b-2 border-[#007FFF] text-[#007FFF]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>i("informations"),children:[e.jsx(q,{className:"mr-2"}),"Informations personnelles"]}),s&&s.type!=="PROVIDER"&&e.jsxs("button",{className:`flex items-center px-6 py-4 text-sm font-medium ${l==="motDePasse"?"border-b-2 border-[#007FFF] text-[#007FFF]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>i("motDePasse"),children:[e.jsx(se,{className:"mr-2"}),"Changer de mot de passe"]}),e.jsxs("button",{className:`flex items-center px-6 py-4 text-sm font-medium ${l==="adresses"?"border-b-2 border-[#007FFF] text-[#007FFF]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>i("adresses"),children:[e.jsx(re,{className:"mr-2"}),"Mes adresses"]})]}),e.jsxs("div",{className:"p-6",children:[l==="informations"&&e.jsx(ae,{user:s,onUpdateSuccess:()=>{}}),l==="motDePasse"&&e.jsx(le,{}),l==="adresses"&&e.jsx(ie,{user:s,onUpdateSuccess:()=>{}})]})]})]})})]})};export{xe as default};
