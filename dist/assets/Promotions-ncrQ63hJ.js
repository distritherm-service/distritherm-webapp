import{o as j,j as e,q as y,s as k,r as x,t as w,L,B as C,m as R}from"./index-DouBw5SX.js";import{g as T,a as F,b as P,c as S,d as N,e as M,p as B}from"./promotions-CHZ35TnQ.js";const W=({item:s,className:c=""})=>{const{addToFavorites:m,removeFromFavorites:d,isFavorite:g}=j(),n=h=>{h.preventDefault(),h.stopPropagation(),g(s.id)?d(s.id):m(s)};return e.jsx("button",{onClick:n,className:`p-2 rounded-full transition-colors duration-200 ${g(s.id)?"text-red-500 hover:bg-red-50":"text-gray-400 hover:bg-gray-50"} ${c}`,"aria-label":g(s.id)?"Retirer des favoris":"Ajouter aux favoris",children:g(s.id)?e.jsx(y,{className:"w-6 h-6"}):e.jsx(k,{className:"w-6 h-6"})})},O=({promotion:s})=>{const[c,m]=x.useState(null),{addToCart:d,isInCart:g}=w(),{addToFavorites:n,removeFromFavorites:h,isFavorite:p}=j(),b=()=>{s.inStock&&(d({id:s.id,name:s.title,price:s.discountPrice,image:s.image,quantity:1}),u("Promotion ajoutée au panier"))},l=()=>{if(p(s.id))h(s.id),u("Retiré des favoris");else{const o={id:s.id,name:s.title,price:s.discountPrice,image:s.image,description:s.description,category:s.category,brand:s.brand};n(o),u("Ajouté aux favoris")}},u=o=>{m(o),setTimeout(()=>m(null),2e3)},a=g(s.id),t=T(s.validUntil);return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 h-full flex flex-col group relative",children:[c&&e.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 bg-black/80 text-white px-4 py-2 rounded-full text-sm z-50 animate-fade-in-down",children:c}),e.jsxs("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold py-1.5 px-3 rounded-bl-xl z-10 transform translate-y-0 group-hover:-translate-y-0.5 transition-transform",children:["-",s.discountPercentage,"%"]}),e.jsxs("div",{className:"relative aspect-[4/3]",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:o=>{const i=o.target;i.onerror=null,i.src="https://via.placeholder.com/400x300?text=Distritherm"}}),s.featured&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-amber-600 text-white text-sm px-3 py-1 rounded-full shadow-md",children:"Offre vedette"})}),!s.inStock&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white px-4 py-2 rounded-full font-bold transform -rotate-12 shadow-lg",children:"Rupture de stock"})}),e.jsx(W,{item:{id:s.id,name:s.title,price:s.discountPrice,image:s.image,description:s.description,category:s.category,brand:s.brand},type:"promotion",className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-red-50"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent pt-10 pb-4 px-4",children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-white/20 backdrop-blur-sm text-white text-xs px-2 py-0.5 rounded mb-1",children:s.category}),e.jsx("h3",{className:"text-lg font-bold text-white line-clamp-1",children:s.title})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"line-through text-gray-300 text-sm",children:s.originalPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})}),e.jsx("div",{className:"text-white font-bold text-xl",children:s.discountPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})})]})]})})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsxs("div",{className:"mb-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-indigo-600",children:s.brand}),e.jsx("span",{className:"text-xs text-gray-500",children:s.subcategory})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 flex-grow",children:s.description}),e.jsxs("div",{className:"mt-auto space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Prix original"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"line-through text-gray-500 text-sm",children:s.originalPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})}),e.jsx("span",{className:"text-xs text-gray-400",children:"(TTC)"})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["HT: ",(s.originalPrice/1.2).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Prix promo"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"font-bold text-teal-600",children:s.discountPrice.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})}),e.jsx("span",{className:"text-xs text-gray-400",children:"(TTC)"})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["HT: ",(s.discountPrice/1.2).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Code promo:"}),e.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-sm",children:s.code})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Économie:"}),e.jsx("div",{className:"font-bold text-red-500",children:(s.originalPrice-s.discountPrice).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:b,disabled:!s.inStock||a,className:`flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-all ${!s.inStock||a?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a?"Dans le panier":"Ajouter au panier"}),e.jsx("button",{onClick:l,className:"p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(y,{className:`w-5 h-5 ${p(s.id)?"text-red-500":"text-gray-400"}`})})]}),t>0&&e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[t," jour",t>1?"s":""," restant",t>1?"s":""]})]})]})]})},A=({promotions:s,title:c,showViewAllButton:m=!0})=>(F(),e.jsxs("div",{children:[c&&e.jsx("div",{className:"flex flex-col items-start mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-3xl font-bold text-left",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent",children:c})}),e.jsx("div",{className:"absolute -bottom-3 left-0 w-32 h-1 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-full"})]})}),s.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-sm border border-gray-100 max-w-xl mx-auto",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune promotion trouvée"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Actuellement, aucune promotion ne correspond à vos critères de recherche."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-2 rounded-lg font-medium text-sm transition-all shadow-md hover:shadow-lg",children:"Réinitialiser les filtres"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6",children:s.map(d=>e.jsx(O,{promotion:d},d.id))}),m&&s.length>0&&e.jsx("div",{className:"text-center mt-12",children:e.jsx(L,{to:"/promotions",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-8 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-cyan-600 transition-colors shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all",children:"Voir toutes nos promotions"})})]})),E=({filters:s,onFilterChange:c,onSaveFilters:m})=>{const[d,g]=x.useState(!1),[n]=x.useState(["Toutes les catégories",...P()]),[h,p]=x.useState(["Toutes les sous-catégories"]),[b]=x.useState(["Toutes les marques",...S()]),[l]=x.useState(N()),[u,a]=x.useState(s.priceRange);x.useEffect(()=>{if(s.category!=="Toutes les catégories"){const r=M(s.category);p(["Toutes les sous-catégories",...r])}else p(["Toutes les sous-catégories"])},[s.category]),x.useEffect(()=>{a(s.priceRange)},[s.priceRange]);const t=(r,v)=>{c(r==="category"?{[r]:v,subcategory:"Toutes les sous-catégories"}:{[r]:v})},o=()=>{c({priceRange:u,priceRangeTouched:!0})},i=()=>{m&&m();const r=document.createElement("div");r.classList.add("fixed","bottom-4","right-4","bg-purple-600","text-white","p-4","rounded-lg","shadow-lg","z-50","animate-fade-in"),r.textContent="Filtres sauvegardés avec succès",document.body.appendChild(r),setTimeout(()=>{r.classList.add("animate-fade-out"),setTimeout(()=>r.remove(),500)},3e3)},f=[{value:"featured",label:"Offres vedettes"},{value:"discount_high",label:"Réduction : plus élevée d'abord"},{value:"discount_low",label:"Réduction : plus faible d'abord"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix décroissant"},{value:"ending_soon",label:"Se termine bientôt"}];return e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsxs("button",{className:"md:hidden w-full p-4 flex items-center justify-between text-gray-800 font-medium bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-100 sticky top-0 z-30",onClick:()=>g(!d),style:{minHeight:56},children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtres et Tri"]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:`${d?"block":"hidden"} md:block p-4 md:p-6`,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5 md:gap-6",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 group-hover:text-purple-600 transition-colors",children:"Catégorie"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 appearance-none bg-white pr-8 hover:border-purple-300 transition-colors",value:s.category,onChange:r=>t("category",r.target.value),children:n.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 group-hover:text-purple-600 transition-colors",children:"Sous-catégorie"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:`w-full border rounded-lg p-2.5 text-sm appearance-none bg-white pr-8 transition-colors ${s.category==="Toutes les catégories"?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-200 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 hover:border-purple-300"}`,value:s.subcategory,onChange:r=>t("subcategory",r.target.value),disabled:s.category==="Toutes les catégories",children:h.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 group-hover:text-purple-600 transition-colors",children:"Marque"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 appearance-none bg-white pr-8 hover:border-purple-300 transition-colors",value:s.brand,onChange:r=>t("brand",r.target.value),children:b.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 group-hover:text-purple-600 transition-colors",children:"Prix après réduction (€)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:l.min,max:l.max,value:u[0],onChange:r=>a([parseInt(r.target.value)||l.min,u[1]]),className:"flex-1 border border-gray-200 rounded-lg p-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 hover:border-purple-300 transition-colors",placeholder:"Min"}),e.jsx("span",{className:"text-gray-500",children:"à"}),e.jsx("input",{type:"number",min:l.min,max:l.max,value:u[1],onChange:r=>a([u[0],parseInt(r.target.value)||l.max]),className:"flex-1 border border-gray-200 rounded-lg p-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 hover:border-purple-300 transition-colors",placeholder:"Max"})]}),e.jsx("button",{onClick:o,className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white py-1.5 px-3 rounded-lg text-sm transition-colors shadow-sm hover:shadow",children:"Appliquer"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 group-hover:text-purple-600 transition-colors",children:"Trier par"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 appearance-none bg-white pr-8 hover:border-purple-300 transition-colors",value:s.sortBy,onChange:r=>t("sortBy",r.target.value),children:f.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"flex items-center pb-1",children:[e.jsx("input",{type:"checkbox",id:"inStockOnly",checked:s.inStockOnly,onChange:r=>t("inStockOnly",r.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"inStockOnly",className:"ml-2 block text-sm text-gray-700 hover:text-purple-600 cursor-pointer transition-colors",children:"Offres disponibles uniquement"})]}),e.jsxs("button",{onClick:i,className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white py-2 px-3 rounded-lg text-sm font-medium transition-all shadow-sm hover:shadow flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Sauvegarder ce filtre"]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-2",children:[s.category!=="Toutes les catégories"&&e.jsxs("span",{className:"inline-flex items-center bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 text-sm px-3 py-1.5 rounded-full border border-purple-100 shadow-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7l3-3 3 3M7 7h10v10l-3 3-3-3H7V7z"})}),s.category,e.jsx("button",{onClick:()=>t("category","Toutes les catégories"),className:"ml-1.5 text-gray-500 hover:text-red-500 transition-colors","aria-label":"Supprimer le filtre de catégorie",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.subcategory!=="Toutes les sous-catégories"&&e.jsxs("span",{className:"inline-flex items-center bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 text-sm px-3 py-1.5 rounded-full border border-purple-100 shadow-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.subcategory,e.jsx("button",{onClick:()=>t("subcategory","Toutes les sous-catégories"),className:"ml-1.5 text-gray-500 hover:text-red-500 transition-colors","aria-label":"Supprimer le filtre de sous-catégorie",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.brand!=="Toutes les marques"&&e.jsxs("span",{className:"inline-flex items-center bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 text-sm px-3 py-1.5 rounded-full border border-purple-100 shadow-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.brand,e.jsx("button",{onClick:()=>t("brand","Toutes les marques"),className:"ml-1.5 text-gray-500 hover:text-red-500 transition-colors","aria-label":"Supprimer le filtre de marque",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(s.priceRange[0]>l.min||s.priceRange[1]<l.max)&&s.priceRangeTouched&&e.jsxs("span",{className:"inline-flex items-center bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 text-sm px-3 py-1.5 rounded-full border border-purple-100 shadow-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.priceRange[0].toLocaleString("fr-FR"),"€ - ",s.priceRange[1].toLocaleString("fr-FR"),"€",e.jsx("button",{onClick:()=>{t("priceRange",[l.min,l.max]),t("priceRangeTouched",!1)},className:"ml-1.5 text-gray-500 hover:text-red-500 transition-colors","aria-label":"Supprimer le filtre de prix",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.inStockOnly&&e.jsxs("span",{className:"inline-flex items-center bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 text-sm px-3 py-1.5 rounded-full border border-purple-100 shadow-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Offres disponibles uniquement",e.jsx("button",{onClick:()=>t("inStockOnly",!1),className:"ml-1.5 text-gray-500 hover:text-red-500 transition-colors","aria-label":"Supprimer le filtre en stock uniquement",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(s.category!=="Toutes les catégories"||s.subcategory!=="Toutes les sous-catégories"||s.brand!=="Toutes les marques"||(s.priceRange[0]>l.min||s.priceRange[1]<l.max)&&s.priceRangeTouched||s.inStockOnly)&&e.jsxs("button",{onClick:()=>c({category:"Toutes les catégories",subcategory:"Toutes les sous-catégories",brand:"Toutes les marques",priceRange:[l.min,l.max],inStockOnly:!1,priceRangeTouched:!1}),className:"ml-auto text-white bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 px-4 py-1.5 rounded-lg text-sm font-medium shadow-sm hover:shadow transition-all flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Réinitialiser"]})]})]})]})},U=()=>{const s=N(),[c,m]=x.useState(!0),[d,g]=x.useState([]),[n,h]=x.useState({category:"Toutes les catégories",subcategory:"Toutes les sous-catégories",brand:"Toutes les marques",priceRange:[s.min,s.max],sortBy:"featured",inStockOnly:!1,discountLevel:"all"});x.useEffect(()=>{m(!0);const u=setTimeout(()=>{let a=[...B];n.category!=="Toutes les catégories"&&(a=a.filter(t=>t.category===n.category)),n.subcategory!=="Toutes les sous-catégories"&&(a=a.filter(t=>t.subcategory===n.subcategory)),n.brand!=="Toutes les marques"&&(a=a.filter(t=>t.brand===n.brand)),a=a.filter(t=>t.discountPrice>=n.priceRange[0]&&t.discountPrice<=n.priceRange[1]),n.discountLevel!=="all"&&(a=a.filter(t=>{const o=t.discountPercentage;switch(n.discountLevel){case"upto10":return o<=10;case"10to20":return o>10&&o<=20;case"20to30":return o>20&&o<=30;case"over30":return o>30;default:return!0}})),n.inStockOnly&&(a=a.filter(t=>t.inStock)),a=p(a,n.sortBy),g(a),m(!1)},400);return()=>clearTimeout(u)},[n]);const p=(u,a)=>{const t=[...u];switch(a){case"featured":return t.sort((o,i)=>o.featured&&!i.featured?-1:!o.featured&&i.featured?1:0);case"discount_high":return t.sort((o,i)=>i.discountPercentage-o.discountPercentage);case"discount_low":return t.sort((o,i)=>o.discountPercentage-i.discountPercentage);case"price_asc":return t.sort((o,i)=>o.discountPrice-i.discountPrice);case"price_desc":return t.sort((o,i)=>i.discountPrice-o.discountPrice);case"ending_soon":return t.sort((o,i)=>{const f=new Date(o.validUntil).getTime(),r=new Date(i.validUntil).getTime();return f-r});default:return t}},b=u=>{h(a=>({...a,...u}))},l=()=>{console.log("Filtres sauvegardés:",n)};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(C,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-4 relative inline-block",children:[e.jsx("span",{className:"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] bg-clip-text text-transparent",children:"Nos Promotions"}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] rounded-full"})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mt-8",children:"Découvrez nos offres spéciales et réductions exclusives"})]}),e.jsx("div",{className:"mb-8",children:e.jsx(E,{filters:n,onFilterChange:b,onSaveFilters:l})}),e.jsxs("div",{className:"mb-8 flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-[#007FFF] mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),c?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-5 w-5 mr-2 rounded-full border-2 border-[#007FFF] border-t-transparent animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Chargement des promotions..."})]}):e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold text-[#007FFF]",children:d.length})," promotion",d.length!==1?"s":""," trouvée",d.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 text-[#007FFF]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Utilisez les filtres pour affiner vos résultats"]})]}),e.jsx("div",{className:`transition-all duration-500 ${c?"opacity-50 blur-sm":"opacity-100 blur-0"}`,children:e.jsx(A,{promotions:c?[]:d,title:"Offres Spéciales & Réductions",showViewAllButton:!1})})]}),e.jsx(R,{})]})};export{U as default};
