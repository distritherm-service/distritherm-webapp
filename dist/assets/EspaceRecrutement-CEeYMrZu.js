import{r as h,j as e,B as $,v as O,w as L,x as I,m as A,y as T,z as R,h as X,A as U,C as H}from"./index-B80DkxpM.js";import{y as p}from"./index-BwCTFgZ5.js";const G=5*1024*1024,W=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],J=()=>{const[a,j]=h.useState({desired_position:"",current_position:"",civility:"",first_name:"",last_name:"",email:"",phone_number:"",address:"",postal_code:"",city:"",message:""}),[c,f]=h.useState(null),[m,b]=h.useState(null),[F,y]=h.useState(!1),[t,x]=h.useState({}),[v,N]=h.useState({cv:!1,motivation:!1}),[z,w]=h.useState(!1),B=["Commercial(e) B2B","Technicien(ne) SAV","Responsable logistique","Assistant(e) commercial(e)","Chargé(e) de clientèle","Technicien(ne) de maintenance"],S=[{icon:e.jsx(T,{className:"w-8 h-8 text-[#007FFF]"}),title:"Équipe dynamique",description:"Rejoignez une équipe passionnée et collaborative"},{icon:e.jsx(R,{className:"w-8 h-8 text-[#007FFF]"}),title:"Formation continue",description:"Développez vos compétences avec nos programmes de formation"},{icon:e.jsx(X,{className:"w-8 h-8 text-[#007FFF]"}),title:"Environnement stimulant",description:"Travaillez dans un cadre moderne et innovant"},{icon:e.jsx(U,{className:"w-8 h-8 text-[#007FFF]"}),title:"Évolution de carrière",description:"Des opportunités d'évolution au sein de l'entreprise"}],_=s=>s.size>G?`Le fichier "${s.name}" dépasse la taille maximale de 5 MB`:W.includes(s.type)?null:`Format du fichier "${s.name}" non supporté. Utilisez PDF, DOC ou DOCX`,C=(s,r)=>{var i;const n=(i=s.target.files)==null?void 0:i[0];if(n){const o=_(n);if(o){p.error(o),s.target.value="",r==="cv"?f(null):b(null);return}r==="cv"?(f(n),x({...t,cvFile:""})):(b(n),x({...t,motivationFile:""}))}},g=(s,r,n)=>{s.preventDefault(),s.stopPropagation(),N(i=>({...i,[r]:n}))},D=(s,r)=>{s.preventDefault(),s.stopPropagation(),N(i=>({...i,[r]:!1}));const n=s.dataTransfer.files;if(n&&n.length>0){const i=n[0];if(!i){p.error("Erreur lors du chargement du fichier");return}try{const o=_(i);if(o){p.error(o,{position:"top-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}if(r==="cv"){f(i),x({...t,cvFile:""});const u=document.getElementById("cv-upload");u&&(u.value="")}else{b(i),x({...t,motivationFile:""});const u=document.getElementById("motivation-upload");u&&(u.value="")}}catch(o){console.error("Erreur lors du traitement du fichier:",o),p.error("Une erreur s'est produite lors du traitement du fichier")}}},l=s=>{const{name:r,value:n}=s.target;j(i=>({...i,[r]:n})),x(i=>({...i,[r]:""}))},q=()=>{const s={};return a.desired_position||(s.desired_position="Veuillez sélectionner un poste"),a.current_position||(s.current_position="Veuillez indiquer votre poste actuel"),a.civility||(s.civility="Veuillez sélectionner une civilité"),a.last_name||(s.last_name="Le nom est requis"),a.first_name||(s.first_name="Le prénom est requis"),a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(s.email="Veuillez saisir un email valide"):s.email="L'email est requis",a.phone_number||(s.phone_number="Le téléphone est requis"),a.address||(s.address="L'adresse est requise"),a.postal_code||(s.postal_code="Le code postal est requis"),a.city||(s.city="La ville est requise"),a.message||(s.message="Le message est requis"),c||(s.cvFile="Le CV est requis"),x(s),Object.keys(s).length===0},M=()=>{j({desired_position:"",current_position:"",civility:"",first_name:"",last_name:"",email:"",phone_number:"",address:"",postal_code:"",city:"",message:""}),f(null),b(null);const s=document.getElementById("cv-upload"),r=document.getElementById("motivation-upload");s&&(s.value=""),r&&(r.value="")},P=async s=>{var n,i,o,u,k;if(s.preventDefault(),!q()){p.error("Veuillez remplir tous les champs obligatoires");return}if(!c){p.error("Le CV est obligatoire"),x(d=>({...d,cvFile:"Le CV est obligatoire"}));return}y(!0),w(!1);const r=new FormData;try{if(r.append("desired_position",a.desired_position),r.append("current_position",a.current_position),r.append("civility",a.civility),r.append("first_name",a.first_name),r.append("last_name",a.last_name),r.append("email",a.email),r.append("phone_number",a.phone_number),r.append("address",a.address),r.append("postal_code",a.postal_code),r.append("city",a.city),r.append("message",a.message),c instanceof File)r.append("cvFile",c,c.name);else throw new Error("Le fichier CV n'est pas valide");m&&m instanceof File&&r.append("motivationFile",m,m.name);const d=await H.post("/recruitment",r,{headers:{"x-platform":"web","Content-Type":"multipart/form-data"}});console.log("Réponse du serveur:",await d.data),p.success(((n=d.data)==null?void 0:n.message)||"Votre candidature a été envoyée avec succès !"),w(!0),M()}catch(d){console.error("Erreur lors de l'envoi de la candidature:",d);const V=((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||((k=(u=d.response)==null?void 0:u.data)==null?void 0:k.error)||d.message||"Une erreur est survenue lors de l'envoi de votre candidature";p.error(V)}finally{y(!1)}},E=s=>{try{if(s==="cv"){f(null);const r=document.getElementById("cv-upload");r&&(r.value="")}else{b(null);const r=document.getElementById("motivation-upload");r&&(r.value="")}}catch(r){console.error("Erreur lors de la suppression du fichier:",r)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx($,{}),e.jsx("main",{className:"flex-grow",children:e.jsxs("section",{className:"relative py-20 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-[#7CB9E8]/30",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.2]"}),e.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-[#7CB9E8] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-[#007FFF] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"})]}),e.jsxs("div",{className:"container relative mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-4 relative inline-block",children:[e.jsx("span",{className:"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] bg-clip-text text-transparent",children:"Rejoignez notre équipe"}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] rounded-full"})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mt-8",children:"Découvrez les opportunités de carrière chez Distritherm Services et participez à notre développement"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:S.map((s,r)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-[#7CB9E8]/20 flex items-center justify-center mb-4",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]},r))}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Formulaire de recrutement"}),z&&e.jsx("div",{className:"bg-green-50 p-4 rounded-lg mb-6 border border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(O,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-800 font-medium",children:"Candidature envoyée avec succès!"}),e.jsx("p",{className:"text-green-700 mt-1",children:"Votre candidature a bien été reçue. Nous l'examinerons dans les plus brefs délais et reviendrons vers vous prochainement."})]})]})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Poste Souhaité",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"desired_position",value:a.desired_position,onChange:l,className:`w-full px-4 rounded-lg h-[45px] rounded-lg border ${t.desired_position?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,children:[e.jsx("option",{value:"",children:"Sélectionnez un poste"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]}),t.desired_position&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.desired_position})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Poste Actuel",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"current_position",value:a.current_position,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.current_position?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Votre poste actuel"}),t.current_position&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.current_position})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Civilité",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"civility",value:"M.",checked:a.civility==="M.",onChange:l,className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"M."})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"civility",value:"Mme",checked:a.civility==="Mme",onChange:l,className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Mme"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"civility",value:"Non précisé",checked:a.civility==="Non précisé",onChange:l,className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Non précisé"})]})]}),t.civility&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.civility})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"last_name",value:a.last_name,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.last_name?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Nom"}),t.last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.last_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prénom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"first_name",value:a.first_name,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.first_name?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Prénom"}),t.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.first_name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.email?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Email"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Téléphone",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone_number",value:a.phone_number,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.phone_number?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Téléphone"}),t.phone_number&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.phone_number})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"address",value:a.address,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.address?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Adresse"}),t.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.address})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Code Postal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"postal_code",value:a.postal_code,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.postal_code?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Code Postal"}),t.postal_code&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.postal_code})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ville",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"city",value:a.city,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${t.city?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Ville"}),t.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.city})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Message / Lettre de motivation",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"message",value:a.message,onChange:l,rows:5,className:`w-full px-4 py-3 rounded-lg border ${t.message?"border-red-500":"border-gray-200"} focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70`,placeholder:"Votre message / motivation"}),t.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CV (PDF, DOC, DOCX)",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex items-center justify-center w-full",onDragOver:s=>g(s,"cv",!0),onDragEnter:s=>g(s,"cv",!0),onDragLeave:s=>g(s,"cv",!1),onDrop:s=>D(s,"cv"),children:e.jsxs("label",{className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 ${t.cvFile?"border-red-500 bg-red-50":v.cv?"border-[#007FFF] bg-[#7CB9E8]/20":"border-gray-300 bg-white/70"} transition-colors duration-200 relative`,children:[c&&e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),E("cv")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors",title:"Supprimer le fichier",children:"×"}),e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(L,{className:`w-8 h-8 mb-3 ${v.cv,"text-[#007FFF]"}`}),c?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-[#007FFF] mb-1",children:"Fichier sélectionné:"}),e.jsx("p",{className:"text-xs text-gray-700 font-medium",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(c.size/(1024*1024)).toFixed(2)," MB"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Cliquez pour télécharger"})," ou glissez-déposez"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["PDF, DOC ou DOCX (",e.jsx("span",{className:"font-medium",children:"max 5MB"}),")"]})]})]}),e.jsx("input",{id:"cv-upload",type:"file",accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",className:"hidden",onChange:s=>C(s,"cv")})]})}),t.cvFile&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cvFile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lettre de motivation (PDF, DOC, DOCX) (optionnel)"}),e.jsx("div",{className:"flex items-center justify-center w-full",onDragOver:s=>g(s,"motivation",!0),onDragEnter:s=>g(s,"motivation",!0),onDragLeave:s=>g(s,"motivation",!1),onDrop:s=>D(s,"motivation"),children:e.jsxs("label",{className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 ${v.motivation?"border-[#007FFF] bg-[#7CB9E8]/20":"border-gray-300 bg-white/70"} transition-colors duration-200 relative`,children:[m&&e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),E("motivation")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors",title:"Supprimer le fichier",children:"×"}),e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(L,{className:`w-8 h-8 mb-3 ${v.motivation,"text-[#007FFF]"}`}),m?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-[#007FFF] mb-1",children:"Fichier sélectionné:"}),e.jsx("p",{className:"text-xs text-gray-700 font-medium",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(m.size/(1024*1024)).toFixed(2)," MB"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Cliquez pour télécharger"})," ou glissez-déposez"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["PDF, DOC ou DOCX (",e.jsx("span",{className:"font-medium",children:"max 5MB"}),")"]})]})]}),e.jsx("input",{id:"motivation-upload",type:"file",accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",className:"hidden",onChange:s=>C(s,"motivation")})]})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Les champs marqués d'un ",e.jsx("span",{className:"text-red-500",children:"*"})," sont obligatoires"]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:F,className:"w-full px-6 py-4 bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] text-white font-medium rounded-lg hover:from-[#6ba9d8] hover:to-[#0065cc] transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed",children:F?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(I,{className:"animate-spin mr-2"})," Envoi en cours..."]}):"Envoyer ma candidature"})})]})]})})]})]})}),e.jsx(A,{})]})};export{J as default};
