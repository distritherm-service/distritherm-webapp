import{r as u,n as O,o as I,j as e,p as z,q as Q,s as W,L as B,t as _,v as U,w as R,x as $,y as H,c as V,z as G,A as E,C as J,B as Z,k as K}from"./index-BEi8WKuF.js";const X=({promotion:t})=>{const[h,c]=u.useState(!1),[o,n]=u.useState(!1),[g,f]=u.useState(!1),{addToCart:s,isInCart:i}=O(),{addToFavorites:j,removeFromFavorites:x,isFavorite:P}=I();if(u.useEffect(()=>{f(!0)},[]),!t)return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:"Chargement..."});const v=i(t.id),C=o||!t.image?"/image-produit-defaut.jpeg":t.image,m=(()=>{if(!t.validUntil)return 0;const r=new Date,p=new Date(t.validUntil).getTime()-r.getTime();return Math.max(0,Math.ceil(p/(1e3*3600*24)))})(),w=r=>{r.preventDefault(),t.inStock&&(s({id:t.id,name:t.title,price:t.discountPrice,image:t.image,quantity:1}),c(!0),setTimeout(()=>c(!1),2e3))},N=r=>{if(r.preventDefault(),!!g)if(P(t.id))x(t.id);else{const l={id:t.id,name:t.title,priceTtc:t.discountPrice,image:t.image,description:t.description};j(l)}},F=t.originalPrice||0,y=t.discountPrice||0,b=t.discountPercentage||0,L=F-y;return e.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 ease-out overflow-hidden border border-orange-100/50 hover:border-orange-300/70 transform hover:-translate-y-2",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden bg-gradient-to-br from-orange-50 to-red-50",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-20 bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-full text-sm font-bold shadow-lg flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),"-",b,"%"]}),t.quantity&&t.quantity<=5&&e.jsxs("div",{className:"absolute top-16 left-4 z-20 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg",children:["Plus que ",t.quantity," en stock"]}),e.jsx("img",{src:C,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110",onError:()=>n(!0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-red-900/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),g&&e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-x-2 group-hover:translate-x-0",children:[e.jsx("button",{onClick:N,className:"bg-white/95 backdrop-blur-sm p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",children:P(t.id)?e.jsx(Q,{className:"w-4 h-4 text-red-500"}):e.jsx(W,{className:"w-4 h-4 text-gray-600 hover:text-red-500"})}),e.jsx(B,{to:`/produit/${t.id}`,className:"bg-white/95 backdrop-blur-sm p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 text-orange-600 hover:text-orange-700",children:e.jsx(_,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-2 group-hover:translate-y-0",children:[t.inStock?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-green-500/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"En stock"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-orange-400/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),"Sur commande"]}),m>0&&e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-red-500/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx(U,{className:"w-3 h-3"}),m," jour",m>1?"s":""]})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 line-clamp-2 leading-tight mb-2 group-hover:text-red-700 transition-colors duration-300",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["Prix normal: ",R(F)]})}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Prix promotion"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-red-600 to-red-800 bg-clip-text text-transparent",children:R(y)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Vous économisez"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:R(L)})]})]}),e.jsx("button",{onClick:w,disabled:!t.inStock||v,className:`w-full py-3.5 px-6 rounded-xl font-semibold text-sm transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 shadow-lg ${t.inStock?h||v?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-200":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-red-200 hover:shadow-red-300":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h||v?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Ajouté au panier !"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"Ajouter au panier"})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-red-400 via-red-600 to-red-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})},Y=({promotions:t=[],title:h,showViewAllButton:c=!1,isLoading:o=!1})=>{const n=Array.isArray(t)?t:[];return e.jsxs("div",{children:[h&&e.jsx("div",{className:"flex flex-col items-start mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-3xl font-bold text-left",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent",children:h})}),e.jsx("div",{className:"absolute -bottom-3 left-0 w-32 h-1 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-full"})]})}),o?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6",children:Array.from({length:4}).map((g,f)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden animate-pulse h-96",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mt-4"})]})]},f))}):n.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-sm border border-gray-100 max-w-xl mx-auto",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune promotion trouvée"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Actuellement, aucune promotion n'est disponible."}),e.jsx(B,{to:"/nos-produits",className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-2 rounded-lg font-medium text-sm transition-all shadow-md hover:shadow-lg inline-block",children:"Voir Nos produits"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6",children:n.map(g=>e.jsx(X,{promotion:g},(g==null?void 0:g.id)||Math.random()))}),c&&n.length>0&&e.jsx("div",{className:"text-center mt-12",children:e.jsx(B,{to:"/promotions",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-8 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-cyan-600 transition-colors shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all",children:"Voir toutes nos promotions"})})]})},ee=({filters:t,onFilterChange:h})=>{const[c,o]=u.useState([]),[n,g]=u.useState([]),[f,s]=u.useState(!0),[i,j]=u.useState(null),[x,P]=u.useState(!1),[v,C]=u.useState(null),[d]=u.useState({min:0,max:1e4}),[m,w]=u.useState({...t}),[N,F]=u.useState(t.searchQuery||"");u.useEffect(()=>{(async()=>{try{s(!0);const[k,T]=await Promise.all([V.getAllCategories(),G()]);o(k),g(T),j(null)}catch{j("Erreur lors du chargement des données de filtrage")}finally{s(!1)}})()},[]),u.useEffect(()=>{w({...t}),F(t.searchQuery||"")},[t]);const y=()=>JSON.stringify(m)!==JSON.stringify({...t,searchQuery:t.searchQuery||""}),b=(a,k)=>{w(T=>({...T,[a]:k}))},L=a=>{F(a.target.value),w(k=>({...k,searchQuery:a.target.value}))},r=a=>{a.preventDefault(),l()},l=async()=>{P(!0),await new Promise(a=>setTimeout(a,300)),h({...m,priceRangeTouched:!0}),P(!1),S("success","Filtres appliqués avec succès !")},p=()=>{const a={category:"Toutes les catégories",mark:"",priceRange:[d.min,d.max],sortBy:"featured",inStockOnly:!1,priceRangeTouched:!1,searchQuery:"",discountLevel:"all"};w(a),F(""),h(a),S("info","Filtres réinitialisés")},S=(a,k)=>{C({type:a,message:k}),setTimeout(()=>C(null),3e3)},A=[{value:"featured",label:"Offres vedettes"},{value:"discount_high",label:"Réduction : plus élevée d'abord"},{value:"discount_low",label:"Réduction : plus faible d'abord"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix décroissant"},{value:"ending_soon",label:"Se termine bientôt"}],q=()=>m.priceRange[0]>d.min||m.priceRange[1]<d.max,D=()=>m.category!=="Toutes les catégories"||m.mark!==""||q()||m.inStockOnly||m.discountLevel!=="all"||N!=="";return f?e.jsx("div",{className:"w-full max-w-xs bg-white rounded-xl shadow-md border border-gray-100 p-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})}):i?e.jsx("div",{className:"w-full max-w-xs bg-white rounded-xl shadow-md border border-gray-100 p-4",children:e.jsx("div",{className:"text-red-500 text-center text-sm",children:i})}):e.jsxs("div",{className:"w-full max-w-xs bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden relative",children:[v&&e.jsx("div",{className:`absolute top-4 left-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg animate-bounce-in ${v.type==="success"?"bg-green-500 text-white":"bg-blue-500 text-white"}`,children:e.jsxs("div",{className:"flex items-center",children:[v.type==="success"?e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:v.message})]})}),e.jsx("div",{className:"bg-gradient-to-r from-[#EBF4FF] to-[#E6F7FF] border-b border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-[#007FFF]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtres Promotions"]}),y()&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-orange-600 ml-1 font-medium",children:"Non appliqués"})]})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("form",{onSubmit:r,className:"relative",children:[e.jsx("input",{type:"text",value:N,onChange:L,placeholder:"Rechercher une promotion...",className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] pr-10 hover:border-[#007FFF] transition-colors"}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-[#007FFF] transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] appearance-none bg-white pr-8 hover:border-[#007FFF] transition-colors",value:m.category,onChange:a=>b("category",a.target.value),children:[e.jsx("option",{value:"Toutes les catégories",children:"Toutes les catégories"}),c.filter(a=>a.level===1).map(a=>e.jsx("option",{value:a.id.toString(),children:a.name},a.id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marque"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] appearance-none bg-white pr-8 hover:border-[#007FFF] transition-colors",value:m.mark||"",onChange:a=>b("mark",a.target.value),children:[e.jsx("option",{value:"",children:"Toutes les marques"}),n.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix après réduction (€)"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:d.min,max:d.max,value:m.priceRange[0],onChange:a=>b("priceRange",[Number(a.target.value),m.priceRange[1]]),className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] hover:border-[#007FFF] transition-colors",placeholder:"Min"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"à"}),e.jsx("input",{type:"number",min:d.min,max:d.max,value:m.priceRange[1],onChange:a=>b("priceRange",[m.priceRange[0],Number(a.target.value)]),className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] hover:border-[#007FFF] transition-colors",placeholder:"Max"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Niveau de remise"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"discount-all",type:"radio",checked:m.discountLevel==="all",onChange:()=>b("discountLevel","all"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("label",{htmlFor:"discount-all",className:"ml-2 text-sm text-gray-700",children:"Toutes les remises"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"discount-low",type:"radio",checked:m.discountLevel==="low",onChange:()=>b("discountLevel","low"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("label",{htmlFor:"discount-low",className:"ml-2 text-sm text-gray-700",children:"Moins de 10%"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"discount-medium",type:"radio",checked:m.discountLevel==="medium",onChange:()=>b("discountLevel","medium"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("label",{htmlFor:"discount-medium",className:"ml-2 text-sm text-gray-700",children:"10% à 25%"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"discount-high",type:"radio",checked:m.discountLevel==="high",onChange:()=>b("discountLevel","high"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("label",{htmlFor:"discount-high",className:"ml-2 text-sm text-gray-700",children:"Plus de 25%"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Trier par"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF] appearance-none bg-white pr-8 hover:border-[#007FFF] transition-colors",value:m.sortBy,onChange:a=>b("sortBy",a.target.value),children:A.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"inStockOnly",checked:m.inStockOnly,onChange:a=>b("inStockOnly",a.target.checked),className:"h-4 w-4 text-[#007FFF] focus:ring-[#007FFF] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"inStockOnly",className:"ml-2 block text-sm text-gray-700",children:"En stock uniquement"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:l,disabled:x||!y(),className:`w-full px-4 py-3 rounded-lg text-sm font-medium transition-all duration-300 transform flex items-center justify-center gap-2 ${x?"bg-green-500 text-white cursor-not-allowed scale-105":y()?"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] hover:from-[#007FFF]/90 hover:to-[#00BFFF]/90 text-white hover:scale-105 hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Application en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),y()?"Appliquer les filtres":"Filtres appliqués"]})}),D()&&e.jsxs("button",{onClick:p,className:"w-full border border-red-300 text-red-600 bg-white hover:bg-red-50 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 flex items-center justify-center gap-2 hover:border-red-400",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Réinitialiser les filtres"]})]})]})]})},M=t=>{var h,c,o;return t?{id:((h=t.id)==null?void 0:h.toString())||"unknown",title:t.name||"Sans titre",description:t.description||"Aucune description disponible",image:t.imagesUrl&&t.imagesUrl.length>0?t.imagesUrl[0]:"/image-produit-defaut.jpeg",category:((c=t.category)==null?void 0:c.name)||((o=t.categoryId)==null?void 0:o.toString())||"",subcategory:"",originalPrice:t.priceTtc||0,discountPrice:t.promotionPrice||0,discountPercentage:t.promotionPercentage||0,validUntil:t.promotionEndDate||new Date().toISOString(),code:"",inStock:t.quantity>0||!1,featured:t.isFavorited||!1,quantity:t.quantity||0}:(console.warn("Tentative de mapper une promotion undefined"),{id:"error",title:"Promotion indisponible",description:"Les détails de cette promotion ne sont pas disponibles",image:"/image-produit-defaut.jpeg",category:"",subcategory:"",originalPrice:0,discountPrice:0,discountPercentage:0,validUntil:new Date().toISOString(),code:"",inStock:!1,quantity:0})},te=async(t=1,h=10,c,o)=>{var n,g;try{const f={page:t,limit:h};c&&c!=="Toutes les catégories"&&(f.categoryId=c),o&&o!==""&&(f.mark=o),console.log("Récupération des promotions avec params:",f);const s=await E.get("/products/promotions",{params:f});if(console.log("Réponse API promotions:",s.data),(n=s==null?void 0:s.data)!=null&&n.products&&Array.isArray(s.data.products)){const i=s.data.products;console.log("Produits en promotion trouvés:",i.length);const j=i.filter(x=>x.isInPromotion===!0&&x.promotionPrice&&x.promotionPrice>0&&x.promotionPrice<x.priceTtc);return console.log("Produits réellement en promotion:",j.length),j.map(M).filter(Boolean)}if((g=s==null?void 0:s.data)!=null&&g.data&&Array.isArray(s.data.data)){const i=s.data.data;return console.log("Produits en promotion trouvés (ancienne structure):",i.length),i.filter(x=>x.isInPromotion===!0&&x.promotionPrice&&x.promotionPrice>0&&x.promotionPrice<x.priceTtc).map(M).filter(Boolean)}return console.warn("Format de réponse inattendu pour les promotions:",s==null?void 0:s.data),[]}catch(f){return console.error("Erreur lors de la récupération des promotions:",f),[]}},se=async(t,h)=>{var c,o,n,g;try{const f={page:1,limit:1};t&&t!=="Toutes les catégories"&&(f.categoryId=t),h&&h!==""&&(f.mark=h);const s=await E.get("/products/promotions",{params:f});return console.log("Réponse API count promotions:",s.data),((o=(c=s==null?void 0:s.data)==null?void 0:c.meta)==null?void 0:o.total)!==void 0?(console.log("Total promotions depuis meta:",s.data.meta.total),s.data.meta.total):(n=s==null?void 0:s.data)!=null&&n.products&&Array.isArray(s.data.products)?(console.log("Count promotions depuis products array:",s.data.products.length),s.data.products.length):(g=s==null?void 0:s.data)!=null&&g.data&&Array.isArray(s.data.data)?(console.log("Count promotions depuis data array (ancienne structure):",s.data.data.length),s.data.data.length):(console.warn("Méta-données de pagination non trouvées dans la réponse:",s==null?void 0:s.data),0)}catch(f){return console.error("Erreur lors de la récupération du nombre de promotions:",f),0}},re=(t,h)=>{const c=[...t];switch(h){case"featured":return c.sort((o,n)=>o.featured===n.featured?0:o.featured?-1:1);case"discount_high":return c.sort((o,n)=>n.discountPercentage-o.discountPercentage);case"discount_low":return c.sort((o,n)=>o.discountPercentage-n.discountPercentage);case"price_asc":return c.sort((o,n)=>o.discountPrice-n.discountPrice);case"price_desc":return c.sort((o,n)=>n.discountPrice-o.discountPrice);case"ending_soon":return c.sort((o,n)=>new Date(o.validUntil).getTime()-new Date(n.validUntil).getTime());default:return c}},oe=()=>{const[t,h]=u.useState(!0),[c,o]=u.useState(!1),[n,g]=u.useState([]),[f,s]=u.useState(0),[i,j]=u.useState(1),[x,P]=u.useState(12),[v,C]=u.useState(1),[d,m]=u.useState({category:"Toutes les catégories",subcategory:"Toutes les sous-catégories",mark:"",priceRange:[0,1e4],sortBy:"featured",inStockOnly:!1,discountLevel:"all",priceRangeTouched:!1,searchQuery:""}),w=u.useCallback(async()=>{h(!0),o(!1);try{const r=await te(i,x,d.category,d.mark);g(r||[]);const l=await se(d.category,d.mark);s(l),C(Math.ceil(l/x)),console.log("Promotions chargées:",{nombre:(r==null?void 0:r.length)||0,total:l,page:i,totalPages:Math.ceil(l/x)})}catch(r){console.error("Erreur lors du chargement des promotions:",r),g([]),s(0),C(1),o(!0)}finally{h(!1)}},[i,x,d.category,d.mark]);u.useEffect(()=>{w()},[w]);const N=J.useMemo(()=>{if(!n||!Array.isArray(n))return[];let r=[...n];if(d.searchQuery){const l=d.searchQuery.toLowerCase();r=r.filter(p=>{var S,A;return((S=p.title)==null?void 0:S.toLowerCase().includes(l))||((A=p.description)==null?void 0:A.toLowerCase().includes(l))})}if(d.priceRangeTouched&&(r=r.filter(l=>l.discountPrice>=d.priceRange[0]&&l.discountPrice<=d.priceRange[1])),d.inStockOnly&&(r=r.filter(l=>l.inStock)),d.discountLevel!=="all")switch(d.discountLevel){case"low":r=r.filter(l=>l.discountPercentage<10);break;case"medium":r=r.filter(l=>l.discountPercentage>=10&&l.discountPercentage<=25);break;case"high":r=r.filter(l=>l.discountPercentage>25);break}return re(r,d.sortBy)},[n,d]),F=r=>{("category"in r||"searchQuery"in r||"mark"in r)&&j(1),m(l=>({...l,...r}))},y=r=>{r!==i&&(j(r),window.scrollTo({top:0,behavior:"smooth"}))},b=r=>{P(r),j(1)},L=()=>{j(1),w()};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-gray-50 via-white to-blue-50/20",children:[e.jsxs("main",{className:"flex-grow",children:[e.jsxs("section",{className:"relative h-64 md:h-80 lg:h-[420px] w-full overflow-hidden shadow-md",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:"/icone/image-arriere-plan-promotion.png",alt:"Promotions Distritherm Services",className:"w-full h-full object-cover object-center"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/10 to-transparent backdrop-blur-sm"})]}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center text-center px-4",children:[e.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold text-white drop-shadow-lg mb-4 tracking-tight",children:"Nos Promotions"}),e.jsx("br",{}),e.jsx(Z,{})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-full max-w-none -translate-x-1/2",children:e.jsx("svg",{viewBox:"0 0 1600 100",className:"w-full h-6 md:h-8",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,0 C600,100 1000,100 1600,0 L1600,100 L0,100 Z",fill:"#f8f9ff"})})})]}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-80 flex-shrink-0",children:e.jsx("div",{className:"sticky top-6",children:e.jsx(ee,{filters:d,onFilterChange:F})})}),e.jsxs("main",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8 backdrop-blur-sm bg-white/80",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#007FFF] to-[#00BFFF] rounded-xl flex items-center justify-center mr-4 shadow-lg p-2",children:e.jsx("img",{src:"/icone/imageremise.png",alt:"Promotions",className:"w-full h-full object-contain"})}),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-5 w-5 mr-3 rounded-full border-2 border-[#007FFF] border-t-transparent animate-spin"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Chargement des promotions..."})]}):c?e.jsxs("div",{className:"flex items-center text-red-500",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"font-medium",children:"Erreur lors du chargement"}),e.jsx("button",{onClick:L,className:"ml-3 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 text-sm font-medium transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Réessayer"})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] bg-clip-text text-transparent",children:N.length.toLocaleString("fr-FR")}),e.jsxs("span",{className:"text-gray-600 ml-2",children:["promotion",N.length!==1?"s":""," trouvée",N.length!==1?"s":""]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Page ",i," sur ",v]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center bg-gradient-to-r from-orange-50 to-red-50 px-4 py-2 rounded-lg border border-orange-100",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-[#007FFF]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Offres à durée limitée"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Afficher"}),e.jsxs("select",{className:"border border-gray-200 rounded-md p-1 text-sm focus:ring-2 focus:ring-[#007FFF] focus:border-[#007FFF]",value:x,onChange:r=>b(Number(r.target.value)),disabled:t,children:[e.jsx("option",{value:"12",children:"12"}),e.jsx("option",{value:"24",children:"24"}),e.jsx("option",{value:"36",children:"36"}),e.jsx("option",{value:"48",children:"48"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"par page"})]})]})]})}),e.jsx("div",{className:`transition-all duration-700 ${t?"opacity-50 scale-95 blur-sm":"opacity-100 scale-100 blur-0"}`,children:e.jsx(Y,{promotions:N,isLoading:t})}),v>1&&!c&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 backdrop-blur-sm bg-white/80",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>y(Math.max(1,i-1)),disabled:i===1,className:`w-10 h-10 rounded-xl flex items-center justify-center font-medium transition-all duration-300 ${i===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] text-white hover:shadow-lg transform hover:-translate-y-0.5"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),[...Array(v)].map((r,l)=>{const p=l+1;return p===1||p===v||p>=i-1&&p<=i+1?e.jsx("button",{onClick:()=>y(p),className:`w-10 h-10 rounded-xl flex items-center justify-center font-medium transition-all duration-300 ${i===p?"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] text-white shadow-lg transform -translate-y-0.5":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:transform hover:-translate-y-0.5"}`,children:p},p):p===i-2&&i>3||p===i+2&&i<v-2?e.jsx("span",{className:"w-10 h-10 flex items-center justify-center text-gray-400",children:"..."},p):null}),e.jsx("button",{onClick:()=>y(Math.min(v,i+1)),disabled:i===v,className:`w-10 h-10 rounded-xl flex items-center justify-center font-medium transition-all duration-300 ${i===v?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] text-white hover:shadow-lg transform hover:-translate-y-0.5"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})})})]})]})}),e.jsx("section",{className:"bg-gradient-to-br from-white via-blue-50/50 to-orange-50/30 py-20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-[#007FFF] to-[#00BFFF] bg-clip-text text-transparent",children:"Pourquoi profiter de nos promotions ?"})}),e.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-[#007FFF] to-[#00BFFF] rounded-full mx-auto mb-6"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-5xl mx-auto leading-relaxed",children:"Découvrez des offres exceptionnelles sur nos meilleurs produits, disponibles pour une durée limitée"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg border border-gray-100 p-8 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 backdrop-blur-sm bg-white/80",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.jsx("img",{src:"/icone/imageremise.png",alt:"Remises Exceptionnelles",className:"w-full h-full object-contain"})}),e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-4 group-hover:text-[#007FFF] transition-colors duration-300",children:"Remises Exceptionnelles"}),e.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:"Bénéficiez de réductions importantes sur une sélection de produits de qualité, avec des économies pouvant aller jusqu'à 50%."})]}),e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg border border-gray-100 p-8 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 backdrop-blur-sm bg-white/80",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.jsx("img",{src:"/icone/imageflash.png",alt:"Offres Flash",className:"w-full h-full object-contain"})}),e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-4 group-hover:text-[#007FFF] transition-colors duration-300",children:"Offres Flash"}),e.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:"Profitez d'offres limitées dans le temps sur des produits sélectionnés. Soyez rapide, ces promotions ne durent pas !"})]}),e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg border border-gray-100 p-8 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 backdrop-blur-sm bg-white/80",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.jsx("img",{src:"/icone/imagequalite.png",alt:"Qualité Garantie",className:"w-full h-full object-contain"})}),e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800 mb-4 group-hover:text-[#007FFF] transition-colors duration-300",children:"Qualité Garantie"}),e.jsx("p",{className:"text-gray-600 text-center leading-relaxed",children:"Même en promotion, nous maintenons nos standards de qualité élevés. Tous nos produits sont garantis et certifiés."})]})]})]})})]}),e.jsx(K,{})]})};export{oe as default};
