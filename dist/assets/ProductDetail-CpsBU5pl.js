const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductSpecifications-tPNyZgaB.js","assets/index-BEi8WKuF.js","assets/index-D4lVrISG.css","assets/ProductDocuments-DlclU99H.js"])))=>i.map(i=>d[i]);
import{K as N,M as se,u as re,n as ie,o as le,r as s,j as e,B as ne,G as o,y as oe,N as ce,O as de,Q as me,I as O,H as Z,k as ue,R as xe,T as pe,m as he,_ as M,i as ge}from"./index-BEi8WKuF.js";import{L as U}from"./Layout-Dj9Dgcds.js";function fe(a){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(a)}function ye(a){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(a)}function be(a){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(a)}function je(a){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"},child:[]}]})(a)}const ve=s.lazy(()=>M(()=>import("./ProductSpecifications-tPNyZgaB.js"),__vite__mapDeps([0,1,2]))),Ne=s.lazy(()=>M(()=>import("./ProductDocuments-DlclU99H.js"),__vite__mapDeps([3,1,2]))),Q=()=>e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-600"})}),we=({images:a,onImageError:l})=>{const[d,m]=s.useState(0),[u,v]=s.useState(!1),y=()=>{m(r=>(r+1)%a.length)},b=()=>{m(r=>(r-1+a.length)%a.length)},c=()=>{v(!u)},x=()=>{l&&l()};return e.jsxs("div",{className:"relative w-full aspect-[4/3] bg-gray-100 rounded-2xl overflow-hidden",children:[e.jsx(O,{mode:"wait",children:e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:`relative w-full h-full ${u?"cursor-zoom-out":"cursor-zoom-in"}`,onClick:c,children:e.jsx("img",{src:a[d],alt:`Product view ${d+1}`,className:`w-full h-full object-contain transition-transform duration-300 ${u?"scale-150":"scale-100"}`,onError:x})},d)}),e.jsx("button",{onClick:b,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg transition-all","aria-label":"Image précédente",children:e.jsx(fe,{className:"w-6 h-6 text-gray-800"})}),e.jsx("button",{onClick:y,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg transition-all","aria-label":"Image suivante",children:e.jsx(ye,{className:"w-6 h-6 text-gray-800"})}),e.jsx("button",{onClick:c,className:"absolute bottom-4 right-4 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg transition-all","aria-label":u?"Dézoomer":"Zoomer",children:u?e.jsx(je,{className:"w-6 h-6 text-gray-800"}):e.jsx(be,{className:"w-6 h-6 text-gray-800"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 px-4 py-2 bg-white/80 rounded-full",children:a.map((r,t)=>e.jsx("button",{onClick:()=>m(t),className:`w-2 h-2 rounded-full transition-all ${d===t?"bg-teal-600 scale-125":"bg-gray-400"}`,"aria-label":`Aller à l'image ${t+1}`},t))})]})},ke=({product:a})=>{const l=s.useRef(null),[d,m]=s.useState(!1),[u,v]=s.useState(!0),[y,b]=s.useState([]);s.useEffect(()=>{(async()=>{try{const t=a.categoryId,f=(await ge({category:t.toString(),limit:10})).products.filter(h=>h.id!==a.id&&h.categoryId===a.categoryId).sort((h,j)=>h.markId===a.markId&&j.markId!==a.markId?-1:h.markId!==a.markId&&j.markId===a.markId?1:0);b(f.slice(0,5))}catch(t){console.error("Erreur lors de la récupération des produits similaires:",t),b([])}})()},[a]);const c=()=>{if(!l.current)return;const{scrollLeft:r,scrollWidth:t,clientWidth:p}=l.current;m(r>0),v(r<t-p-5)};s.useEffect(()=>(c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)),[]);const x=r=>{if(!l.current)return;const t=320,p=l.current.scrollLeft;l.current.scrollTo({left:r==="left"?p-t:p+t,behavior:"smooth"}),setTimeout(c,350)};return e.jsxs("div",{className:"relative bg-white rounded-2xl p-6 shadow-lg mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Produits similaires"}),d&&e.jsx("button",{onClick:()=>x("left"),className:"absolute left-2 top-1/2 z-10 bg-white rounded-full shadow-lg p-3 transform -translate-y-1/2","aria-label":"Voir produits précédents",children:e.jsx(Z,{className:"text-gray-800 w-4 h-4"})}),u&&e.jsx("button",{onClick:()=>x("right"),className:"absolute right-2 top-1/2 z-10 bg-white rounded-full shadow-lg p-3 transform -translate-y-1/2","aria-label":"Voir produits suivants",children:e.jsx(pe,{className:"text-gray-800 w-4 h-4"})}),e.jsx("div",{ref:l,className:"flex overflow-x-auto gap-4 pb-4 scrollbar-hide scroll-smooth",onScroll:c,children:y.length>0?y.map(r=>e.jsx("div",{className:"flex-shrink-0 w-[280px]",children:e.jsx(he,{product:r})},r.id)):e.jsx("div",{className:"w-full text-center py-8 text-gray-500",children:"Aucun produit similaire trouvé"})})]})},De=()=>{var P,I;const{id:a}=se(),l=re(),{addToCart:d,isInCart:m}=ie(),{addToFavorites:u,removeFromFavorites:v,isFavorite:y}=le(),[b,c]=s.useState(null),[x,r]=s.useState(1),[t,p]=s.useState(null),[g,f]=s.useState("description"),[h,j]=s.useState(!0),[C,F]=s.useState(null),[D,V]=s.useState(!1);s.useEffect(()=>{(async()=>{if(a)try{j(!0),F(null);const n=await xe(a);p(n)}catch(n){console.error("Erreur lors du chargement du produit:",n),F("Impossible de charger les détails du produit. Veuillez réessayer plus tard.")}finally{j(!1)}})()},[a]);const G=i=>{const n=parseInt(i.target.value);n>0&&r(n)},K=()=>{r(i=>i+1)},J=()=>{x>1&&r(i=>i-1)},X=()=>{if(!t)return;const i=D||!t.imagesUrl||t.imagesUrl.length===0?"/image-produit-defaut.jpeg":`/images/products/${t.imagesUrl[0]}`,n={id:t.id.toString(),name:t.name,price:t.priceTtc,image:i,quantity:x};d(n)},Y=()=>{var i,n,S,T,E,$,L,R,q,A,B,_,z,W,H;if(!t)return null;switch(g){case"description":return e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"prose max-w-none text-gray-600",children:t.description.split(`
`).map((w,k)=>e.jsx("p",{className:"mb-4 leading-relaxed",children:w},k))});case"features":const ee=[`Marque: ${((i=t.mark)==null?void 0:i.name)||"Non spécifiée"}`,`Référence: ${((n=t.productDetail)==null?void 0:n.itemCode)||"Non spécifiée"}`,(S=t.productDetail)!=null&&S.directorWord1?`Caractéristique 1: ${t.productDetail.directorWord1}`:null,(T=t.productDetail)!=null&&T.directorWord2?`Caractéristique 2: ${t.productDetail.directorWord2}`:null,`Poids: ${(E=t.productDetail)!=null&&E.weight?t.productDetail.weight+" kg":"Non spécifié"}`,`État: ${t.active?"Actif":"Inactif"}`,`Quantité disponible: ${t.quantity}`].filter(Boolean);return e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee.map((w,k)=>e.jsxs(o.div,{whileHover:{scale:1.02},className:"flex items-center p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:w})]},k))});case"specs":const te=[{key:"Catégorie",value:(($=t.category)==null?void 0:$.name)||"Non spécifiée"},{key:"Marque",value:((L=t.mark)==null?void 0:L.name)||"Non spécifiée"},{key:"Référence",value:((R=t.productDetail)==null?void 0:R.itemCode)||"Non spécifiée"},(q=t.productDetail)!=null&&q.designation1?{key:"Désignation 1",value:t.productDetail.designation1}:null,(A=t.productDetail)!=null&&A.designation2?{key:"Désignation 2",value:t.productDetail.designation2}:null,(B=t.productDetail)!=null&&B.complementDesignation?{key:"Complément",value:t.productDetail.complementDesignation}:null,(_=t.productDetail)!=null&&_.packaging?{key:"Conditionnement",value:t.productDetail.packaging}:null,(z=t.productDetail)!=null&&z.packagingType?{key:"Type d'emballage",value:t.productDetail.packagingType}:null,(W=t.productDetail)!=null&&W.label?{key:"Label",value:t.productDetail.label}:null,(H=t.productDetail)!=null&&H.unity?{key:"Unité",value:t.productDetail.unity}:null,{key:"Prix HT",value:`${t.priceHt.toFixed(2)} €`},{key:"Prix TTC",value:`${t.priceTtc.toFixed(2)} €`},t.isInPromotion&&t.promotionPrice?{key:"Prix promotionnel",value:`${t.promotionPrice.toFixed(2)} €`}:null,{key:"Disponibilité",value:t.quantity>0?"En stock":"Rupture de stock"}].filter(Boolean);return e.jsx(s.Suspense,{fallback:e.jsx(Q,{}),children:e.jsx(ve,{specifications:te})});case"documents":const ae=[{id:"1",name:`Fiche technique ${t.name}`,type:"fiche_technique",url:"#"},{id:"2",name:"Guide d'installation",type:"manuel",url:"#"}];return e.jsx(s.Suspense,{fallback:e.jsx(Q,{}),children:e.jsx(Ne,{documents:ae})});default:return null}};return h?e.jsx(U,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-80 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):C||!t?e.jsx(U,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:C||"Produit non trouvé"}),e.jsx("button",{onClick:()=>l("/nos-produits"),className:"bg-[#007FFF] text-white px-6 py-2 rounded-lg hover:bg-[#007FFF]/90 transition-colors",children:"Retour aux produits"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[e.jsx(ne,{}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-8 md:py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-16",children:[e.jsx(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-4 md:space-y-8",children:e.jsx("div",{className:"w-full max-w-2xl mx-auto",children:e.jsx(we,{images:D||!t.imagesUrl||t.imagesUrl.length===0?["/image-produit-defaut.jpeg"]:t.imagesUrl.map(i=>`/images/products/${i}`),onImageError:()=>V(!0)})})}),e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-2xl p-6 md:p-8 shadow-lg space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"RÉF:"}),e.jsx("span",{className:"ml-2",children:((P=t.productDetail)==null?void 0:P.itemCode)||"N/A"})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"MARQUE:"}),e.jsx("span",{className:"ml-2 text-[#007FFF]",children:((I=t.mark)==null?void 0:I.name)||"Non spécifiée"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 py-6 border-t border-gray-100",children:[e.jsx("div",{className:"space-y-2 flex-1",children:t.isInPromotion&&t.promotionPrice?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("span",{className:"text-xs font-medium bg-gradient-to-r from-red-500 to-pink-500 text-white px-2 py-0.5 rounded-sm",children:"PROMOTION"})}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:[t.promotionPrice.toFixed(2)," €"]}),e.jsxs("span",{className:"text-sm line-through text-gray-400",children:[t.priceTtc.toFixed(2)," €"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-0.5",children:[e.jsxs("span",{children:["Prix HT: ",(t.promotionPrice/1.2).toFixed(2)," €"]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:"TTC"})]})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:[t.priceTtc.toFixed(2)," €"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"TTC"})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-0.5",children:["Prix HT: ",t.priceHt.toFixed(2)," €"]})]})}),e.jsx(o.div,{whileHover:{scale:1.05},children:e.jsxs("span",{className:`inline-flex items-center px-4 md:px-6 py-1 md:py-2 rounded-full text-xs md:text-sm font-medium ${t.quantity>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${t.quantity>0?"bg-green-500":"bg-red-500"}`}),t.quantity>0?"En stock":"Rupture de stock"]})})]}),e.jsxs("div",{className:"space-y-4 py-4 border-t border-gray-100",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantité"}),e.jsxs("div",{className:"flex border border-gray-300 rounded-xl overflow-hidden",children:[e.jsx("button",{onClick:J,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors","aria-label":"Diminuer la quantité",children:"-"}),e.jsx("input",{type:"number",id:"quantity",min:"1",value:x,onChange:i=>G(i),className:"block w-full border-0 focus:ring-0 text-center text-lg py-2"}),e.jsx("button",{onClick:K,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors","aria-label":"Augmenter la quantité",children:"+"})]})]})}),e.jsxs(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:X,disabled:!t.quantity,className:`w-full flex items-center justify-center gap-2 px-6 py-3 rounded-xl text-white font-medium transition-all ${t.quantity?m(t.id.toString())?"bg-green-500 hover:bg-green-600":"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] hover:from-[#007FFF] hover:to-[#0056b3]":"bg-gray-300 cursor-not-allowed"}`,children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base md:text-lg",children:t.quantity?m(t.id.toString())?"Dans le panier":"Ajouter au panier":"Produit indisponible"})]})]}),t.productDetail&&e.jsxs("div",{className:"flex flex-wrap gap-6 py-4 border-t border-gray-100",children:[t.productDetail.weight&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#7CB9E8] to-[#007FFF] rounded-lg flex items-center justify-center mr-3 shadow-sm",children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Poids"}),e.jsxs("div",{className:"text-sm font-medium",children:[t.productDetail.weight," kg"]})]})]}),t.productDetail.unity&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#7CB9E8] to-[#007FFF] rounded-lg flex items-center justify-center mr-3 shadow-sm",children:e.jsx(de,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Unité"}),e.jsx("div",{className:"text-sm font-medium",children:t.productDetail.unity})]})]}),t.productDetail.packaging&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#7CB9E8] to-[#007FFF] rounded-lg flex items-center justify-center mr-3 shadow-sm",children:e.jsx(me,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Conditionnement"}),e.jsx("div",{className:"text-sm font-medium",children:t.productDetail.packaging})]})]})]})]})]}),e.jsx("div",{className:"mt-12 md:mt-16",children:e.jsxs("div",{className:"bg-white rounded-t-2xl shadow-md",children:[e.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide border-b border-gray-100",children:[e.jsx("button",{onClick:()=>f("description"),className:`px-6 py-4 text-sm md:text-base font-medium whitespace-nowrap transition-colors duration-200 ${g==="description"?"text-teal-600 border-b-2 border-teal-600":"text-gray-500 hover:text-gray-700"}`,children:"Description détaillée"}),e.jsx("button",{onClick:()=>f("features"),className:`px-6 py-4 text-sm md:text-base font-medium whitespace-nowrap transition-colors duration-200 ${g==="features"?"text-teal-600 border-b-2 border-teal-600":"text-gray-500 hover:text-gray-700"}`,children:"Caractéristiques"}),e.jsx("button",{onClick:()=>f("specs"),className:`px-6 py-4 text-sm md:text-base font-medium whitespace-nowrap transition-colors duration-200 ${g==="specs"?"text-teal-600 border-b-2 border-teal-600":"text-gray-500 hover:text-gray-700"}`,children:"Spécifications"}),e.jsx("button",{onClick:()=>f("documents"),className:`px-6 py-4 text-sm md:text-base font-medium whitespace-nowrap transition-colors duration-200 ${g==="documents"?"text-teal-600 border-b-2 border-teal-600":"text-gray-500 hover:text-gray-700"}`,children:"Documents"})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsx(O,{mode:"wait",children:Y()})})]})}),e.jsx("div",{className:"mt-12 md:mt-16",children:e.jsx(ke,{product:t})}),e.jsx("div",{className:"fixed bottom-8 left-8 z-50",children:e.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(-1),className:"bg-teal-600 text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center","aria-label":"Retour à la page précédente",children:e.jsx(Z,{})})})]})}),e.jsx(ue,{})]})};export{De as default};
