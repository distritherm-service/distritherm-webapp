import{r as c,j as e,B as q,w as _,C as z,D,E as P,H as B,t as L,o as R,A as k}from"./index-BmUIpQgT.js";const X=()=>{const[o,A]=c.useState([]),[E,b]=c.useState(!1),[j,y]=c.useState(!1),[m,r]=c.useState(""),[N,v]=c.useState(""),[s,d]=c.useState({civility:"",first_name:"",last_name:"",email:"",phone_number:"",company_name:"",address:"",postal_code:"",city:"",principal_activity:"",message:"",agency_id:null,attachments:[]});c.useEffect(()=>{(async()=>{try{b(!0);const t=await k.get("/agencies"),l=Array.isArray(t.data)?t.data:t.data.data||t.data.agencies||[];A(l)}catch(t){console.error("Erreur lors de la récupération des agences:",t),r("Impossible de récupérer la liste des agences. Veuillez réessayer plus tard.")}finally{b(!1)}})()},[]);const n=a=>{const{name:t,value:l}=a.target;d({...s,[t]:l})},h=a=>{d({...s,civility:a})},S=a=>{const t=a.target.value;d({...s,agency_id:t?parseInt(t,10):null})},V=a=>{if(a.target.files){const t=Array.from(a.target.files),l=t.filter(u=>u.size<=5*1024*1024);l.length!==t.length&&r("Certains fichiers dépassent la limite de 5MB et ont été ignorés.");const x=l.slice(0,3);l.length>3&&r("Vous pouvez joindre jusqu'à 3 fichiers maximum."),d({...s,attachments:x})}},M=async a=>{var u,F,w,C;if(a.preventDefault(),r(""),v(""),!s.civility){r("Veuillez sélectionner une civilité.");return}if(!s.first_name||!s.last_name){r("Veuillez renseigner votre nom et prénom.");return}if(!s.email){r("Veuillez renseigner votre email.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){r("Veuillez saisir un email valide.");return}if(!s.phone_number){r("Veuillez renseigner votre numéro de téléphone.");return}if(!s.address||!s.postal_code||!s.city){r("Veuillez renseigner votre adresse complète.");return}if(!s.agency_id){r("Veuillez sélectionner une agence.");return}const l=s.phone_number.replace(/\s+/g,""),x={...s,phone_number:l,agency_id:s.agency_id};try{y(!0),console.log("Données envoyées:",x);const i=new FormData;Object.entries(x).forEach(([p,f])=>{p!=="attachments"&&i.append(p,String(f))}),s.attachments.forEach((p,f)=>{i.append(`attachments[${f}]`,p)});const g=await k.post("/contact",i,{headers:{"Content-Type":"multipart/form-data"}});console.log("Réponse:",g.data),v("Votre message a été envoyé avec succès. Notre équipe vous contactera prochainement."),d({civility:"",first_name:"",last_name:"",email:"",phone_number:"",company_name:"",address:"",postal_code:"",city:"",principal_activity:"",message:"",agency_id:null,attachments:[]})}catch(i){console.error("Erreur lors de l'envoi du message:",i);const g=((F=(u=i.response)==null?void 0:u.data)==null?void 0:F.message)||((C=(w=i.response)==null?void 0:w.data)==null?void 0:C.error)||"Une erreur est survenue lors de l'envoi de votre message. Veuillez réessayer plus tard.";r(g)}finally{y(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(q,{}),e.jsx("main",{className:"flex-grow",children:e.jsxs("section",{className:"relative py-20 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-[#7CB9E8]/30",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.2]"}),e.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-[#7CB9E8] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-[#007FFF] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"})]}),e.jsxs("div",{className:"container relative mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-4 relative inline-block",children:[e.jsx("span",{className:"bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] bg-clip-text text-transparent",children:"Contacter votre agence"}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] rounded-full"})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mt-8",children:"Notre équipe est à votre disposition pour répondre à toutes vos questions"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-8 sticky top-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Nos coordonnées"}),E?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(_,{className:"animate-spin h-8 w-8 text-[#007FFF]"})}):m?e.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-red-700 mb-6",children:m}):o&&o.length>0?o.map(a=>e.jsx("div",{className:"mb-8 last:mb-0",children:e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-xl bg-gradient-to-br from-white to-gray-50 shadow-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(z,{className:"w-6 h-6 text-[#007FFF]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:a.name}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a.address}),a.postal_code&&a.city&&e.jsxs("p",{className:"text-gray-600 text-sm",children:[a.postal_code," ",a.city]})]})]})},a.id)):e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg text-yellow-700",children:"Aucune agence disponible pour le moment."}),e.jsxs("div",{className:"space-y-4 mt-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(D,{className:"w-5 h-5 text-[#007FFF]"}),e.jsx("span",{className:"text-gray-600",children:"01 48 30 45 70"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{className:"w-5 h-5 text-[#007FFF]"}),e.jsx("span",{className:"text-gray-600",children:"info@distritherm.fr"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(B,{className:"w-5 h-5 text-[#007FFF]"}),e.jsx("span",{className:"text-gray-600",children:"Lun-Ven: 6h30-17h"})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Formulaire de contact"}),m&&e.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-red-700 mb-6",children:m}),N&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-green-700 mb-6 flex items-start",children:[e.jsx(L,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5"}),e.jsx("span",{children:N})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Votre Agence",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"agency_id",value:s.agency_id||"",onChange:S,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",required:!0,children:[e.jsx("option",{value:"",children:"Choisissez votre Agence"}),o&&o.length>0&&o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Civilité",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"M.",checked:s.civility==="M.",onChange:()=>h("M."),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]",required:!0}),e.jsx("span",{className:"ml-2 text-gray-700",children:"M."})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"Mme",checked:s.civility==="Mme",onChange:()=>h("Mme"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Mme"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"Non précisé",checked:s.civility==="Non précisé",onChange:()=>h("Non précisé"),className:"w-4 h-4 text-[#007FFF] border-gray-300 focus:ring-[#007FFF]"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Non précisé"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"last_name",value:s.last_name,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Nom",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prénom",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"first_name",value:s.first_name,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Prénom",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de l'entreprise"}),e.jsx("input",{type:"text",name:"company_name",value:s.company_name,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Nom de votre entreprise"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse e-mail",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Adresse e-mail",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Téléphone",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone_number",value:s.phone_number,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Téléphone",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"address",value:s.address,onChange:n,rows:2,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Adresse",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Code Postal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"postal_code",value:s.postal_code,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Code Postal",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ville",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Ville",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activité Principale"}),e.jsx("input",{type:"text",name:"principal_activity",value:s.principal_activity,onChange:n,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Activité Principale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{name:"message",value:s.message,onChange:n,rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",placeholder:"Message"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pièces jointes",e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(3 fichiers max, 5MB par fichier)"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",multiple:!0,onChange:V,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#007FFF] focus:border-transparent bg-white/70",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx"}),s.attachments.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Fichiers sélectionnés :"}),e.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:s.attachments.map((a,t)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[a.name," (",(a.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("button",{type:"button",onClick:()=>{const l=[...s.attachments];l.splice(t,1),d({...s,attachments:l})},className:"text-red-500 hover:text-red-700 text-sm ml-2",children:"Supprimer"})]},t))})]})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formats acceptés: PDF, JPEG, PNG, DOC, DOCX, XLS, XLSX"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:j,className:"w-full px-6 py-4 bg-gradient-to-r from-[#7CB9E8] to-[#007FFF] text-white font-medium rounded-lg hover:from-[#6ba9d8] hover:to-[#0065cc] transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed",children:j?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(_,{className:"animate-spin mr-2"})," Envoi en cours..."]}):"Envoyer"})})]})]})})]})]})]})}),e.jsx(R,{})]})};export{X as default};
