import{r as n,K as y,x as N,j as e,M as k,N as F,L as g,O as P,t as C,Q as D,R as S}from"./index-DFVFysGo.js";const i=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t),U=({promotion:t})=>{const[l,o]=n.useState(!1),[u,x]=n.useState(!1),[I,T]=n.useState(!1),{addToCart:m,isInCart:h}=y(),{isFavorite:E,toggleFavorite:R}=N();if(!t)return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:"Chargement..."});const a=h(t.id),f=u||!t.image?"/image-produit-defaut.jpeg":t.image,s=(()=>{if(!t.validUntil)return 0;const r=new Date,w=new Date(t.validUntil).getTime()-r.getTime();return Math.max(0,Math.ceil(w/(1e3*3600*24)))})(),p=r=>{r.preventDefault(),t.inStock&&(m({id:t.id,name:t.title,price:t.discountPrice,image:t.image,quantity:1}),o(!0),setTimeout(()=>o(!1),2e3))},d=t.originalPrice||0,c=t.discountPrice||0,b=t.discountPercentage||0,v=d-c,j=typeof t.id=="string"?parseInt(t.id):t.id;return e.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 ease-out overflow-hidden border border-orange-100/50 hover:border-orange-300/70 transform hover:-translate-y-2",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden bg-gradient-to-br from-orange-50 to-red-50",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-20 bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-full text-sm font-bold shadow-lg flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),"-",b,"%"]}),t.quantity&&t.quantity<=5&&e.jsxs("div",{className:"absolute top-16 left-4 z-20 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg",children:["Plus que ",t.quantity," en stock"]}),e.jsx("img",{src:f,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110",onError:()=>x(!0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-red-900/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-x-2 group-hover:translate-x-0",children:[e.jsx(F,{productId:j,variant:"floating",size:"md",className:"z-10"}),e.jsx(g,{to:`/produit/${t.id}?from=promotions`,className:"bg-white/95 backdrop-blur-sm p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 text-orange-600 hover:text-orange-700",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-2 group-hover:translate-y-0",children:[t.inStock?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-green-500/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"En stock"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-orange-400/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),"Sur commande"]}),s>0&&e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-red-500/90 text-white backdrop-blur-sm shadow-lg",children:[e.jsx(C,{className:"w-3 h-3"}),s," jour",s>1?"s":""]})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{to:`/produit/${t.id}?from=promotions`,children:e.jsx("h3",{className:"text-xl font-bold text-gray-900 line-clamp-2 leading-tight mb-2 group-hover:text-red-700 transition-colors duration-300 cursor-pointer hover:underline",children:t.title})}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["Prix normal: ",i(d)]})}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Prix promotion"}),e.jsx("span",{className:"text-1xl font-bold bg-gradient-to-r from-red-600 to-red-800 bg-clip-text text-transparent",children:i(c)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Vous économisez"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:i(v)})]})]}),e.jsx("button",{onClick:p,disabled:!t.inStock||a,className:`w-full py-3.5 px-6 rounded-xl font-semibold text-sm transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 shadow-lg ${t.inStock?l||a?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-200":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-red-200 hover:shadow-red-300":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l||a?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Ajouté au panier !"})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Ajouter au panier"})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-red-400 via-red-600 to-red-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})};export{U as P};
